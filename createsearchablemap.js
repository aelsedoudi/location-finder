function createSearchableMap(locations = allLocations) {
  var bounds = new google.maps.LatLngBounds();
  var mapOptions = {mapTypeId: 'roadmap'};
  var markers = [];
  var infoWindowContent = [];
  var map = new google.maps.Map(document.getElementById('locations-near-you-map'), mapOptions);

  map.setTilt(45);

  locations.forEach(function(location) {
    markers.push([location.name, location.lat, location.lng]);

    infoWindowContent.push(['<div class="infoWindow"><h3>' + location.name +
                            '</h3><p>' + location.address + '<br />' + location.city +
                            ', ' + location.state + ' ' + location.zip + '</p><p>Phone ' +
                            location.phone + '</p></div>']);
  });

  var infoWindow = new google.maps.InfoWindow(), marker, i;

  // Place the markers on the map
  for (i = 0; i < markers.length; i++) {
    var position = new google.maps.LatLng(markers[i][1], markers[i][2]);
    bounds.extend(position);
    marker = new google.maps.Marker({
      position: position,
      map: map,
      title: markers[i][0]
    });

    // Add an infoWindow to each marker, and create a closure so that the current
    // marker is always associated with the correct click event listener
    google.maps.event.addListener(marker, 'click', (function(marker, i) {
      return function() {
        infoWindow.setContent(infoWindowContent[i][0]);
        infoWindow.open(map, marker);
      }
    })(marker, i));

    // Only use the bounds to zoom the map if there is more than 1 location shown
    if (locations.length > 1) {
      map.fitBounds(bounds);
    } else {
      var center = new google.maps.LatLng(locations[0].lat, locations[0].lng);
      map.setCenter(center);
      map.setZoom(15);
    }
  }
}

function filterLocations() {
  var userLatLng;
  var geocoder = new google.maps.Geocoder();
  var userAddress = document.getElementById('userAddress').value.replace(/[^a-z0-9\s]/gi, '');
  var maxRadius = parseInt(document.getElementById('maxRadius').value, 10);

  if (userAddress && maxRadius) {
    userLatLng = getLatLngViaHttpRequest(userAddress);
  }

  function getLatLngViaHttpRequest(address) {
    // Set up a request to the Geocoding API
    // Supported address format is City, City + State, just a street address, or any combo
    var addressStripped = address.split(' ').join('+');
    var key = 'API KEY GOES HERE';
    var request = 'https://maps.googleapis.com/maps/api/geocode/json?address=' + addressStripped + '&key=' + key;

          // Call the Geocoding API using jQuery GET, passing in the request and a callback function
          // which takes one argument "data" containing the response
          $.get( request, function( data ) {
            var searchResultsAlert = document.getElementById('location-search-alert');

            // Abort if there is no response for the address data
            if (data.status === "ZERO_RESULTS") {
              searchResultsAlert.innerHTML = "Sorry, '" + address + "' seems to be an invalid address.";
              return;
            }

            var userLatLng = new google.maps.LatLng(data.results[0].geometry.location.lat, data.results[0].geometry.location.lng);
            var filteredLocations = allLocations.filter(isWithinRadius);

            if (filteredLocations.length > 0) {
              createSearchableMap(filteredLocations);
              createListOfLocations(filteredLocations);
              searchResultsAlert.innerHTML = 'Nectar Girl Locations within ' + maxRadius + ' miles of ' + userAddress + ':';
            } else {
              console.log("nothing found!");
              document.getElementById('locations-near-you').innerHTML = '';
              searchResultsAlert.innerHTML = 'Sorry, no Nectar Girl locations were found within '+ maxRadius + ' miles of ' + userAddress + '.';
            }

            function isWithinRadius(location) {
              var locationLatLng = new google.maps.LatLng(location.lat, location.lng);
              var distanceBetween = google.maps.geometry.spherical.computeDistanceBetween(locationLatLng, userLatLng);

              return convertMetersToMiles(distanceBetween) <= maxRadius;
            }
          });
  }
}

function convertMetersToMiles(meters) {
  return (meters * 0.000621371);
}

function createListOfLocations(locations) {
  var locationsList = document.getElementById('locations-near-you');

  // Clear any existing locations from the previous search first
  locationsList.innerHTML = '';

  locations.forEach( function(location) {
    var specificLocation = document.createElement('div');
    var locationInfo = "<h4>" + location.name + "</h4><p>" + location.address + "</p>" +
                       "<p>"  + location.city + ", " + location.state + " " + location.zip + "</p><p>" + location.phone + "</p>";
    specificLocation.setAttribute("class", 'location-near-you-box');
    specificLocation.innerHTML = locationInfo;
    locationsList.appendChild(specificLocation);
  });
}

$('#submitLocationSearch').on('click', function(e) {
  e.preventDefault();
  filterLocations();
});

/*!
 * Squarespace Lazy Summaries - Tool for overriding 30 items limit and additional features
 * Author: Michael Mashay <michael@squarespacewebsites.com>
 * License: Commercial License
 * 01.12.2020
 */
!function(){var m,w,y,a,n,r,s,C=!1,i=null,l=null,t="7.0",b=function(){return 7<parseFloat(t)},u={hSize:null,floatDir:null,useNumberInRow:!0,itemsInRow:4,tabletSettings:!0,tabletColumns:3,tabletGutter:10,mobileSettings:!0,mobileColumns:1,mobileGutter:5,enableLazy:!0,loadAllOrPag:!1,loadPageSize:4,hideLoadMore:!1,loadMoreText:"",readMoreText:"",useSessionCache:!1,useSQSProxy:!1,proxyCacheTime:10,customLazyIndex:!1,customLazyIndexUrl:"",collectionUrl:"",ignoreInit:!1,alternateImages:!1,enableLazyBody:!1,enableLazyFilter:!1,lazyFilter:{},sortSummaryItems:"no-sort",showShareButtons:"noShare",buttonsIconAlignment:"center",buttonsIconSize:"small",buttonsIconStyle:"square-border",buttonsIconColor:"black",collectionId:"5db0c8204769ff43a071456e",design:"carousel",headerText:"",textSize:"medium",pageSize:4,imageAspectRatio:"1.5",columnWidth:270,gutter:18,listImageSize:30,listImageAlignment:"left",slidesPerRow:4,textAlignment:"left",showTitle:!0,showThumbnail:!0,showExcerpt:!0,showReadMoreLink:!1,showPrice:!0,productQuickViewEnabled:!1,showPastOrUpcomingEvents:"upcoming",metadataPosition:"below-content",primaryMetadata:"none",secondaryMetadata:"none",filter:{},autoCrop:!0,lightbox:!1,mixedContent:!0,blockId:"related-summary-block"},v=(y=String.fromCharCode,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",s={compressToBase64:function(e){if(null==e)return"";var t=s._compress(e,6,function(e){return a.charAt(e)});switch(t.length%4){default:case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:s._decompress(t.length,32,function(e){return o(a,t.charAt(e))})},compressToUTF16:function(e){return null==e?"":s._compress(e,15,function(e){return y(e+32)})+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:s._decompress(t.length,16384,function(e){return t.charCodeAt(e)-32})},compressToUint8Array:function(e){for(var t=s.compress(e),a=new Uint8Array(2*t.length),n=0,r=t.length;n<r;n++){var o=t.charCodeAt(n);a[2*n]=o>>>8,a[2*n+1]=o%256}return a},decompressFromUint8Array:function(e){if(null==e)return s.decompress(e);for(var t=new Array(e.length/2),a=0,n=t.length;a<n;a++)t[a]=256*e[2*a]+e[2*a+1];var r=[];return t.forEach(function(e){r.push(y(e))}),s.decompress(r.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":s._compress(e,6,function(e){return n.charAt(e)})},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),s._decompress(t.length,32,function(e){return o(n,t.charAt(e))}))},compress:function(e){return s._compress(e,16,function(e){return y(e)})},_compress:function(e,t,a){if(null==e)return"";for(var n,r,o,s,i={},l={},c="",m=2,u=3,d=2,p=[],g=0,f=0,h=0;h<e.length;h+=1)if(o=e.charAt(h),Object.prototype.hasOwnProperty.call(i,o)||(i[o]=u++,l[o]=!0),s=c+o,Object.prototype.hasOwnProperty.call(i,s))c=s;else{if(Object.prototype.hasOwnProperty.call(l,c)){if(c.charCodeAt(0)<256){for(n=0;n<d;n++)g<<=1,f==t-1?(f=0,p.push(a(g)),g=0):f++;for(r=c.charCodeAt(0),n=0;n<8;n++)g=g<<1|1&r,f==t-1?(f=0,p.push(a(g)),g=0):f++,r>>=1}else{for(r=1,n=0;n<d;n++)g=g<<1|r,f==t-1?(f=0,p.push(a(g)),g=0):f++,r=0;for(r=c.charCodeAt(0),n=0;n<16;n++)g=g<<1|1&r,f==t-1?(f=0,p.push(a(g)),g=0):f++,r>>=1}0==--m&&(m=Math.pow(2,d),d++),delete l[c]}else for(r=i[c],n=0;n<d;n++)g=g<<1|1&r,f==t-1?(f=0,p.push(a(g)),g=0):f++,r>>=1;0==--m&&(m=Math.pow(2,d),d++),i[s]=u++,c=String(o)}if(""!==c){if(Object.prototype.hasOwnProperty.call(l,c)){if(c.charCodeAt(0)<256){for(n=0;n<d;n++)g<<=1,f==t-1?(f=0,p.push(a(g)),g=0):f++;for(r=c.charCodeAt(0),n=0;n<8;n++)g=g<<1|1&r,f==t-1?(f=0,p.push(a(g)),g=0):f++,r>>=1}else{for(r=1,n=0;n<d;n++)g=g<<1|r,f==t-1?(f=0,p.push(a(g)),g=0):f++,r=0;for(r=c.charCodeAt(0),n=0;n<16;n++)g=g<<1|1&r,f==t-1?(f=0,p.push(a(g)),g=0):f++,r>>=1}0==--m&&(m=Math.pow(2,d),d++),delete l[c]}else for(r=i[c],n=0;n<d;n++)g=g<<1|1&r,f==t-1?(f=0,p.push(a(g)),g=0):f++,r>>=1;0==--m&&(m=Math.pow(2,d),d++)}for(r=2,n=0;n<d;n++)g=g<<1|1&r,f==t-1?(f=0,p.push(a(g)),g=0):f++,r>>=1;for(;;){if(g<<=1,f==t-1){p.push(a(g));break}f++}return p.join("")},decompress:function(t){return null==t?"":""==t?null:s._decompress(t.length,32768,function(e){return t.charCodeAt(e)})},_decompress:function(e,t,a){for(var n,r,o,s,i,l,c=[],m=4,u=4,d=3,p="",g=[],f={val:a(0),position:t,index:1},h=0;h<3;h+=1)c[h]=h;for(r=0,s=Math.pow(2,2),i=1;i!=s;)o=f.val&f.position,f.position>>=1,0==f.position&&(f.position=t,f.val=a(f.index++)),r|=(0<o?1:0)*i,i<<=1;switch(r){case 0:for(r=0,s=Math.pow(2,8),i=1;i!=s;)o=f.val&f.position,f.position>>=1,0==f.position&&(f.position=t,f.val=a(f.index++)),r|=(0<o?1:0)*i,i<<=1;l=y(r);break;case 1:for(r=0,s=Math.pow(2,16),i=1;i!=s;)o=f.val&f.position,f.position>>=1,0==f.position&&(f.position=t,f.val=a(f.index++)),r|=(0<o?1:0)*i,i<<=1;l=y(r);break;case 2:return""}for(n=c[3]=l,g.push(l);;){if(f.index>e)return"";for(r=0,s=Math.pow(2,d),i=1;i!=s;)o=f.val&f.position,f.position>>=1,0==f.position&&(f.position=t,f.val=a(f.index++)),r|=(0<o?1:0)*i,i<<=1;switch(l=r){case 0:for(r=0,s=Math.pow(2,8),i=1;i!=s;)o=f.val&f.position,f.position>>=1,0==f.position&&(f.position=t,f.val=a(f.index++)),r|=(0<o?1:0)*i,i<<=1;c[u++]=y(r),l=u-1,m--;break;case 1:for(r=0,s=Math.pow(2,16),i=1;i!=s;)o=f.val&f.position,f.position>>=1,0==f.position&&(f.position=t,f.val=a(f.index++)),r|=(0<o?1:0)*i,i<<=1;c[u++]=y(r),l=u-1,m--;break;case 2:return g.join("")}if(0==m&&(m=Math.pow(2,d),d++),c[l])p=c[l];else{if(l!==u)return null;p=n+n.charAt(0)}g.push(p),c[u++]=n+p.charAt(0),n=p,0==--m&&(m=Math.pow(2,d),d++)}}});function o(e,t){if(!r[e]){r[e]={};for(var a=0;a<e.length;a++)r[e][e.charAt(a)]=a}return r[e][t]}function d(e){return e?e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;"):e}function p(e){return e?e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/`/g,"&#x60;"):e}function f(e,a){return e=e.replace(/{{(\w+)}}/g,function(e,t){return a&&a.hasOwnProperty(t)?a[t]:"auto"})}function h(e,t,a){var n,r=document.getElementById(t);r?r.styleSheet?r.styleSheet.cssText!==e&&(r.styleSheet.cssText=e):r.textContent!==e&&(r.textContent=e):((n=document.createElement("style")).type="text/css",n.id=t,n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),a.appendChild(n))}function D(e,t){var a=[];e=e.slice(0).sort(),t=t.slice(0).sort();for(var n=e.length,r=0;r<n;r+=1){var o=(e[r]+"").trim();(!o||-1<t.indexOf(o))&&a.push(o)}return 0<a.length}function x(e,t){if(e.CustomFilter&&e.config.sortSummaryItems&&"no-sort"!==e.config.sortSummaryItems)return console.log("Universal Filter here, please use it for sort things!"),t;if(!e.config||!e.config.sortSummaryItems)return C&&console.log("No data for sort!"),t;var a,n=e.config.sortSummaryItems,r=t||e._blockItems;switch(t&&t.size()&&e._blockItems.size()&&(r._nodes=e._blockItems._nodes.concat(t._nodes)),n){case"alph":(e.one(".summary-item [data-title]")||e.one(".summary-item .summary-title-link"))&&r._nodes.sort(function(e,t){return(e=e.querySelector("[data-title]")?e.querySelector("[data-title]").dataset.title.toLowerCase().replace(/\r?\n|\r/g,"").replace(/ /g,""):e.querySelector(".summary-title-link")?e.querySelector(".summary-title-link").innerText.toLowerCase().replace(/\r?\n|\r/g,"").replace(/ /g,""):"")<(t=t.querySelector("[data-title]")?t.querySelector("[data-title]").dataset.title.toLowerCase().replace(/\r?\n|\r/g,"").replace(/ /g,""):t.querySelector(".summary-title-link")?t.querySelector(".summary-title-link").innerText.toLowerCase().replace(/\r?\n|\r/g,"").replace(/ /g,""):"")?-1:t<e?1:0});break;case"alph-desc":(e.one(".summary-item [data-title]")||e.one(".summary-item .summary-title-link"))&&r._nodes.sort(function(e,t){return(e=e.querySelector("[data-title]")?e.querySelector("[data-title]").dataset.title.toLowerCase().replace(/\r?\n|\r/g,"").replace(/ /g,""):e.querySelector(".summary-title-link")?e.querySelector(".summary-title-link").innerText.toLowerCase().replace(/\r?\n|\r/g,"").replace(/ /g,""):"")<(t=t.querySelector("[data-title]")?t.querySelector("[data-title]").dataset.title.toLowerCase().replace(/\r?\n|\r/g,"").replace(/ /g,""):t.querySelector(".summary-title-link")?t.querySelector(".summary-title-link").innerText.toLowerCase().replace(/\r?\n|\r/g,"").replace(/ /g,""):"")?1:t<e?-1:0});break;case"date-asc":r._nodes.sort(function(e,t){var a=e.querySelector(".summary-metadata-item--date"),n=t.querySelector(".summary-metadata-item--date");return(e=a&&a.getAttribute("datetime")?parseInt(a.getAttribute("datetime").replace(/\D/g,"")):e._LZSData&&e._LZSData.startDate?e._LZSData.startDate:e._LZSData&&e._LZSData.addedOn?e._LZSData.addedOn:0)-(t=n&&n.getAttribute("datetime")?parseInt(n.getAttribute("datetime").replace(/\D/g,"")):t._LZSData&&t._LZSData.startDate?t._LZSData.startDate:t._LZSData&&t._LZSData.addedOn?t._LZSData.addedOn:0)});break;case"date-desc":r._nodes.sort(function(e,t){var a=e.querySelector(".summary-metadata-item--date"),n=t.querySelector(".summary-metadata-item--date");return e=a&&a.getAttribute("datetime")?parseInt(a.getAttribute("datetime").replace(/\D/g,"")):e._LZSData&&e._LZSData.startDate?e._LZSData.startDate:e._LZSData&&e._LZSData.addedOn?e._LZSData.addedOn:0,(t=n&&n.getAttribute("datetime")?parseInt(n.getAttribute("datetime").replace(/\D/g,"")):t._LZSData&&t._LZSData.startDate?t._LZSData.startDate:t._LZSData&&t._LZSData.addedOn?t._LZSData.addedOn:0)-e});break;case"price-asc":e.one(".summary-item .sqs-money-native")&&r._nodes.sort(function(e,t){return(e=e.querySelector(".sqs-money-native")&&e.querySelector(".sqs-money-native").innerText?parseInt(e.querySelector(".sqs-money-native").innerText.replace(/\D/g,"")):0)-(t=t.querySelector(".sqs-money-native")&&t.querySelector(".sqs-money-native").innerText?parseInt(t.querySelector(".sqs-money-native").innerText.replace(/\D/g,"")):0)});break;case"price-desc":e.one(".summary-item .sqs-money-native")&&r._nodes.sort(function(e,t){return e=e.querySelector(".sqs-money-native")&&e.querySelector(".sqs-money-native").innerText?parseInt(e.querySelector(".sqs-money-native").innerText.replace(/\D/g,"")):0,(t=t.querySelector(".sqs-money-native")&&t.querySelector(".sqs-money-native").innerText?parseInt(t.querySelector(".sqs-money-native").innerText.replace(/\D/g,"")):0)-e});break;case"likes-asc":r._nodes.sort(function(e,t){return(e=e.getAttribute("data-like-count")?parseInt(e.getAttribute("data-like-count").replace(/\D/g,"")):e._LZSData&&e._LZSData.likeCount?e._LZSData.likeCount:0)-(t=t.getAttribute("data-like-count")?parseInt(t.getAttribute("data-like-count").replace(/\D/g,"")):t._LZSData&&t._LZSData.likeCount?t._LZSData.likeCount:0)});break;case"likes-desc":r._nodes.sort(function(e,t){return e=e.getAttribute("data-like-count")?parseInt(e.getAttribute("data-like-count").replace(/\D/g,"")):e._LZSData&&e._LZSData.likeCount?e._LZSData.likeCount:0,(t=t.getAttribute("data-like-count")?parseInt(t.getAttribute("data-like-count").replace(/\D/g,"")):t._LZSData&&t._LZSData.likeCount?t._LZSData.likeCount:0)-e});break;case"random":r._nodes=function(e){for(var t,a,n=e.length;0!==n;)a=Math.floor(Math.random()*n),t=e[--n],e[n]=e[a],e[a]=t;return e}(r._nodes)}if(t&&t.size())return e.config.loadAllOrPag||(a=r.splice(0,e.config.existedItems.size()),e.one(".summary-item-list")&&e.one(".summary-item-list").empty().insert(a,null),U(e)),r;e.one(".summary-item-list")&&e.one(".summary-item-list").insert(r,null)}function q(e,t){var a,n=e.clickthroughUrl||e.sourceUrl||e.fullUrl,r="social-icon-alignment-"+t.buttonsIconAlignment+" social-icons-color-"+t.buttonsIconColor+" social-icons-size-"+t.buttonsIconSize;return-1<t.buttonsIconStyle.indexOf("-")?r+=" social-icons-shape-"+(a=t.buttonsIconStyle.split("-"))[0]+" social-icons-style-"+a[1]:r+=" social-icons-shape-"+t.buttonsIconStyle,'<div data-item-path="'+n+'" data-item-identifier="'+e.id+'" class="summary-share-buttons socialaccountlinks-v2-block sqs-block-socialaccountlinks-v2"><div class="sqs-block-content"><div class="sqs-svg-icon--outer '+r+'"><nav class="sqs-svg-icon--list"><a href="https://www.facebook.com/sharer/sharer.php?u=" target="_blank" class="summary-share-button sqs-svg-icon--wrapper facebook" data-service="facebook"><div><svg class="sqs-svg-icon--social" viewBox="0 0 64 64"><use class="sqs-use--icon" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ss-facebook-icon"></use><use class="sqs-use--mask" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ss-facebook-mask"></use></svg></div></a><a href="https://twitter.com/intent/tweet?text='+e.title+'&amp;url=" target="_blank" class="summary-share-button sqs-svg-icon--wrapper twitter" data-service="twitter"><div><svg class="sqs-svg-icon--social" viewBox="0 0 64 64"><use class="sqs-use--icon" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ss-twitter-icon"></use><use class="sqs-use--mask" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ss-twitter-mask"></use></svg></div></a><a href="https://www.linkedin.com/shareArticle?mini=true&amp;source='+e.title+'&amp;summary=&amp;url=" target="_blank" class="summary-share-button sqs-svg-icon--wrapper linkedin" data-service="linkedin"><div><svg class="sqs-svg-icon--social" viewBox="0 0 64 64"><use class="sqs-use--icon" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ss-linkedin-icon"></use><use class="sqs-use--mask" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ss-linkedin-mask"></use></svg></div></a></nav></div></div></div>'}function z(e){try{var t=window.localStorage,a=(e=e.replace(/\//g,"")+"_json")+"_expires";if(!e||!t)return!1;try{var n=t.getItem(a);return!!n&&(!(parseInt(n)<(new Date).getTime())&&JSON.parse(t.getItem(e)))}catch(e){return console.log(e),!1}}catch(e){return console.log(e),!1}}function A(t,a,n,e){try{var r=window.localStorage,o=a,s=(a=a.replace(/\//g,"")+"_json")+"_expires";if(e=e||10,t&&r){var i=(new Date).getTime()+6e4*e,l={};if((l=JSON.stringify(t)).length){-1<o.indexOf("/")&&r.getItem(o)&&r.removeItem(o);try{r.setItem(a,l)}catch(e){if(console.log(e.message||e),!n&&t&&t.items&&t.items.length)for(var c=t.items.length-1;0<=c;c--)t.items[c].body&&(t.items[c].body="y");l=JSON.stringify(t);try{r.setItem(a,l),console.log("Items body was reduced to fit localStorage quota")}catch(e){console.log(e.message||e,"Still too heavy collection to save local.")}}r.setItem(s,i)}}}catch(e){console.log(e)}}function S(t,e,a,n,r){function o(){var e=window.location.hostname.replace(/\./g,"-")+"_"+a+"_lazy-"+t;A({saved:!0,minutes:n.cacheTime,timestamp:(new Date).getTime()},e,!0,n.cacheTime)}if(r)o();else{if(n&&n.removeFields&&n.removeFields.length&&(n.removeFields=(n.removeFields+"").split(","),e&&e.items&&e.items.length))for(var s=e.items.length-1;0<=s;s--){var i=e.items[s];n.removeFields.forEach(function(e){"body"!=(e=e.trim())||!i.recordTypeLabel||"image"!=i.recordTypeLabel&&"video"!=i.recordTypeLabel||(e="excerpt"),i.hasOwnProperty(e)&&delete i[e]})}var l={url:(window.Static&&window.Static.SQUARESPACE_CONTEXT&&window.Static.SQUARESPACE_CONTEXT.website&&window.Static.SQUARESPACE_CONTEXT.website.baseUrl||window.location.origin)+"/lazy"+decodeURIComponent(t),content:e};Y.io("https://tools.squarewebsites.org/api/save-sqs-response/"+a+"/",{headers:{"Content-Type":"application/json;charset=UTF-8"},method:"POST",data:JSON.stringify(l),on:{success:function(e,t){t&&t.responseText&&(t=JSON.parse(t.responseText)).success&&t.file_saved&&o()},failure:function(e){console.log(e)}}})}}function g(s,p,g,f,e){var h={enabled:f.useSQSProxy,cacheTime:f.proxyCacheTime||10,removeFields:f.proxyRemoveFields||""};f&&(f.showExcerpt||(h.removeFields="excerpt"),!f.enableLazyBody&&(!e.CustomFilter||e.CustomFilter&&!e.CustomFilter.SQSProxy||e.CustomFilter&&e.CustomFilter.SQSProxy&&!e.CustomFilter.SQSProxy.bodyFieldNeeded)&&(h.removeFields+=",body"));f.promoteThumb=!0;return new Promise(function(c){var m={past:[],upcoming:[],items:[]},u=!1;function d(l,i){var e,t;g?(e=b()?"":"format=main-content&",Y.io(l+"?"+e+"cache="+((new Date).getTime()+"").substr(0,8),{on:{success:function(e,t){var a,n,r=t.responseText;if(r&&-1<r.indexOf('id="collectionsIndex"'))if(r=-1<r.indexOf('<textarea id="collectionsIndex" class="hidden" style="display:none">')?r.split('<textarea id="collectionsIndex" class="hidden" style="display:none">')[1].split("</textarea>")[0]:((a=document.createElement("div")).innerHTML=r,(n=a.querySelector("#collectionsIndex")).value||n.querySelector(".sqs-block-content")&&n.querySelector(".sqs-block-content").innerText||""))try{0==r.indexOf("LZString")?m.items=JSON.parse(v.decompressFromEncodedURIComponent(r.slice(8))):m.items=JSON.parse(r);var o,s=[],i=[];m.items&&m.items.length&&(m.items.forEach(function(e,t){e.fullUrl&&-1===e.fullUrl.indexOf(f.originalCollectionUrl+"/")?s.push(e):i.push(e)}),m.items=i.concat(s)),f.processDataFunction&&"function"==typeof f.processDataFunction&&(o=f.processUrl||f.originalCollectionUrl,m=f.processDataFunction(m,o)),f.promoteThumb&&m.items&&m.items.forEach(function(e){var t;!e.body||e.systemDataId||e.items&&e.items.length||(t=e.body.split('data-src="'))[1]&&(t=t[1].split('"')[0])&&(e.assetUrl=t,e.systemDataId=!0)}),p&&!h.enabled&&A(m,g,!0),f.__all_loaded=!0,h.enabled&&S(l,m,"main-content",h,!1),c(m)}catch(e){console.warn("error : "+e),c(m)}else c(m);else c(m)},failure:function(e,t){console.warn("error : "+t.status),c(m)}}})):(t=-1<l.indexOf("?")?"&format=json":"?format=json",t+="&cache="+((new Date).getTime()+"").substr(0,8),i&&(t+="&offset="+i),f.isEventsCollection&&(t+="&view=list"),Y.io(l+t,{on:{success:function(e,t){var a=t.responseText;if(a)try{var n=JSON.parse(a),r=!!n.upcoming||!!n.past||!!n.items;r&&(n.upcoming&&(m.upcoming=m.upcoming.concat(n.upcoming)),n.past&&(m.past=m.past.concat(n.past)),n.items&&(m.items=m.items.concat(n.items))),n&&"object"==typeof n&&u&&(n.length?m.items=n:m=n);var o,s=[];f.processDataFunction&&"function"==typeof f.processDataFunction&&(o=f.processUrl||f.originalCollectionUrl,(s=f.processDataFunction(n,o)).length&&(m.items=m.items.concat(s))),(i=n.offset&&n.offset!==i?n.offset:n.pagination&&n.pagination.nextPageOffset&&i!==n.pagination.nextPageOffset?n.pagination.nextPageOffset:"")?(f.__all_loaded=!1,(m.upcoming.length>=f.existedItems.size()||m.past.length>=f.existedItems.size()||m.items.length>=f.existedItems.size())&&(f.hasOwnProperty("__all_loaded")&&(r&&(n.items,n.past,n.upcoming))),d(l,i)):(f.__all_loaded=!0,f.promoteThumb&&m.items&&m.items.length&&m.items.forEach(function(e){var t;!e.body||e.systemDataId||e.items&&e.items.length||(t=e.body.split('data-src="'))[1]&&(t=t[1].split('"')[0])&&(e.assetUrl=t,e.systemDataId=!0)}),f.alternateImages&&m.items&&m.items.length&&m.items.forEach(function(e){var t;!e.body||!e.systemDataId||e.items&&e.items.length||(t=e.body.split('data-src="'))[1]&&(t=t[1].split('"')[0])&&(e.alt_image={assetUrl:t,systemDataId:!0})}),n.nestedCategories&&n.nestedCategories.categories&&n.nestedCategories.categories.length&&!n.nestedCategories.tree?(m.nestedCategories=n.nestedCategories,function(e,t,a){if(window.Static&&window.Static.SQUARESPACE_CONTEXT&&window.Static.SQUARESPACE_CONTEXT.authenticatedAccount)return new Y.Promise(function(n){var r=!1,e="/api/content-service/product/1.1/websites/"+t.website.id+"/products/"+t.collection.id+"/categories/tree";try{Y.io(e,{on:{success:function(e,t){var a=t.responseText;a&&-1<a.indexOf("categoryTree")&&!(r=JSON.parse(a))||n(r)},failure:function(e,t){console.warn("Get Nested Categories error : "+t.status),n(r)}}})}catch(e){n(r)}});var n="https://tools.squarewebsites.org/sqs-response/"+window.location.hostname.replace(/\./g,"-")+"/"+a+"/"+(trimSlashes(decodeURIComponent(e)).replace("?","--query--").replace(/[^A-Za-z0-9-]+/g,"-")||"-")+"--nested-categories-tree--.js";return new Y.Promise(function(a,e){Y.io(n,{headers:{"Content-Type":"text/javascript;charset=UTF-8"},on:{success:function(e,t){t&&t.responseText&&a(JSON.parse(t.responseText))},failure:function(){a(!1)}}})})}(l,n,"json").then(function(e){var t;e&&(t={},e.categoryTree&&(t.generated=!0,e.categoryTree.forEach(function(e){t[e.id]=e}),m.nestedCategories||(m.nestedCategories={})),e.generated&&(t=e),m.nestedCategories.tree=t,m.nestedCategories.categoryTree=e.categoryTree),h&&S(l,m,"json",h,!1),c(m)})):(h.enabled&&S(l,m,"json",h,!1),p&&!h.enabled&&A(m,l,!1),c(m)))}catch(e){console.warn("error : "+e),c(m)}else c(m)},failure:function(e,t){console.warn("error : "+t.status),c(m)}}}))}g&&(-1<g.indexOf("http://")||-1<g.indexOf("https://"))&&(s=g+"",u=!(g=!1));function a(){if(o){var e=o.get("value")||"";try{m.items=JSON.parse(e);var a=[],n=[];m.items&&m.items.length&&(m.items.forEach(function(e,t){-1===e.fullUrl.indexOf(f.originalCollectionUrl+"/")?a.push(e):n.push(e)}),m.items=n.concat(a)),f.processDataFunction&&"function"==typeof f.processDataFunction&&(t=f.processUrl||f.originalCollectionUrl,m=f.processDataFunction(m,t)),f.__all_loaded=!0,p&&A(m,g),c(m)}catch(e){console.warn("error : "+e),f.__all_loaded=!0,f.processDataFunction&&"function"==typeof f.processDataFunction&&(t=f.processUrl||f.originalCollectionUrl,m=f.processDataFunction(m,t)),c(m)}}else{var t,r;f&&f.ajaxData&&f.collectionUrl===s?(f.__all_loaded=!0,c(f.ajaxData)):(r=z(g||s))&&p&&!h.enabled?(f.__all_loaded=!0,f.processDataFunction&&"function"==typeof f.processDataFunction&&(t=f.processUrl||f.originalCollectionUrl,r=f.processDataFunction(r,t)),c(r)):d(s)}}var e,n,o=Y.one(".sqs-layout #collectionsIndex");h&&h.enabled?(e=g?"main-content":"json",n=z(window.location.hostname.replace(/\./g,"-")+"_"+e+"_lazy-"+s),function(e,t,a,n){0==e.indexOf("/")&&(e=e.substr(1));var r,o="https://tools.squarewebsites.org/sqs-response/"+(window.Static&&window.Static.SQUARESPACE_CONTEXT&&window.Static.SQUARESPACE_CONTEXT.website&&window.Static.SQUARESPACE_CONTEXT.website.baseUrl&&new URL(window.Static.SQUARESPACE_CONTEXT.website.baseUrl)||window.location).hostname.replace(/\./g,"-")+"/"+t+"/lazy-"+((r=decodeURIComponent(e))&&0==r.indexOf("/")&&(r=r.substr(1)),r.replace("?","--query--").replace(/[^A-Za-z0-9-]+/g,"-")||"-")+".js";return!a||!a.saved||a&&a.minutes&&a.minutes!=n.cacheTime||!n.cacheTime?o+="?ver="+(new Date).getTime():a&&a.timestamp&&(o+="?ver="+a.timestamp),new Y.Promise(function(a,n){Y.io(o,{headers:{"Content-Type":"application/json;charset=UTF-8"},on:{success:function(e,t){if(t&&t.responseText)try{a(JSON.parse(t.responseText))}catch(e){n("server malformed response")}else n("server empty response")},failure:function(){n("server")}}})})}(s,e,n,h).then(function(e){var t=e.items&&e.items.length;c(e),t&&n&&n.saved&&(!n||!n.minutes||n.minutes==h.cacheTime)&&h.cacheTime||a()}).catch(function(e){console.log(e),a()})):a()})}function L(f,h,y,b){return new Promise(function(e){h.builtItems||(h.builtItems=[],h.relatedIdToDelete&&h.builtItems.push(h.relatedIdToDelete)),h.jsonTransformFunction&&"function"==typeof h.jsonTransformFunction&&(h.summItems=h.jsonTransformFunction(h.summItems,h)||h.summItems);var t=new Y.NodeList,a=document.createElement("div"),n=window.DOMParser&&new window.DOMParser;if(h.summItems&&h.summItems.length&&!b){for(var r=h.summItems,o=r.length,s=0;s<o;s++){var i,l,c,m,u,d=r[s];if(d.id&&-1===h.builtItems.indexOf(d.id))if(d.readMoreText=h.readMoreText,d.itemUrl=(d.clickthroughUrl&&d.clickthroughUrl!=d.urlId?d.clickthroughUrl:(d.passthrough||h.followSourceUrl)&&d.sourceUrl&&d.sourceUrl!=d.urlId?d.sourceUrl:d.fullUrl).replace('target="_blank',"").replace("%22target%3D%22_blank",""),y.followSourceUrl&&(d.followSourceUrl=!0),d.collectionUrl=d.collectionUrl||h.originalCollectionUrl,d.collectionUrl.length&&"/"===d.collectionUrl.charAt(d.collectionUrl.length-1)&&(d.collectionUrl=d.collectionUrl.slice(0,-1)),d.summ_config=y,d.formatDate=d.startDate?Y.Date.format(new Date(d.startDate),{format:"%b %e, %Y"}):Y.Date.format(new Date(d.addedOn),{format:"%b %e, %Y"}),d.formatShortDate=d.startDate?Y.Date.format(new Date(d.startDate),{format:"%F"}):Y.Date.format(new Date(d.publishOn),{format:"%F"}),d.formatMonth=d.startDate?Y.Date.format(new Date(d.startDate),{format:"%b"}):Y.Date.format(new Date(d.publishOn),{format:"%b"}),d.formatDay=d.startDate?Y.Date.format(new Date(d.startDate),{format:"%e"}):Y.Date.format(new Date(d.publishOn),{format:"%e"}),d.startDate&&d.endDate&&(d.formatTime12=Y.Date.format(new Date(d.startDate),{format:"%l:%M%P"})+" â€“ "+Y.Date.format(new Date(d.endDate),{format:"%l:%M%P"}),d.formatTime24=Y.Date.format(new Date(d.startDate),{format:"%H:%M"})+" â€“ "+Y.Date.format(new Date(d.endDate),{format:"%H:%M"})),"image"!==d.recordTypeLabel&&"video"!==d.recordTypeLabel||(d.excerpt=d.excerpt||d.body),h.enableLazyBody&&d.body&&(d.bodyExcerpt=!0),"store-item"===d.recordTypeLabel&&((i=Y.Squarespace.Commerce.priceString(d).trim().split(" <"))[1]?(i[0]='<span class="sqs-money-native">'+i[0].replace(/[^,\d.]/g,"")+"</span> ",i[1]='<span class="original-price"><span class="sqs-money-native">'+i[1].replace(/[^,\d.]/g,"")+"</span></span>"):(i[1]=" ",i[0]='<span class="sqs-money-native">'+i[0].replace(/[^,\d.]/g,"")+"</span>"),d.price='<div class="product-price">'+i[0]+i[1]+"</div>",h.productQuickViewEnabled&&(d.quickProduct='<div class="sqs-product-quick-view-button-wrapper"><span class="sqs-product-quick-view-button" data-id="'+d.id+'" data-group="'+h.blockId+'">Quick View</span></div>'),Y.Squarespace.Commerce.soldOut(d)?(d.sold=" sold-out",d.productMark='<div class="summary-product-status sqs-product-mark-wrapper"><div class="product-mark sold-out">'+(window.Static&&window.Static.SQUARESPACE_CONTEXT&&window.Static.SQUARESPACE_CONTEXT.websiteSettings&&window.Static.SQUARESPACE_CONTEXT.websiteSettings.storeSettings&&window.Static.SQUARESPACE_CONTEXT.websiteSettings.storeSettings.merchandisingSettings.customSoldOutText?window.Static.SQUARESPACE_CONTEXT.websiteSettings.storeSettings.merchandisingSettings.customSoldOutText:"sold out")+"</div></div>"):Y.Squarespace.Commerce.onSale(d)&&(d.productMark='<div class="summary-product-status sqs-product-mark-wrapper"><div class="product-mark sale">sale</div></div>',d.sale=" on-sale"),!d.systemDataId&&!d.mainImageId&&d.items&&d.items[0]&&d.items[0].systemDataId&&(d.systemDataId=d.items[0].systemDataId,d.mediaFocalPoint=d.items[0].mediaFocalPoint,d.assetUrl=d.items[0].assetUrl,d.originalSize=d.items[0].originalSize)),d.body&&!d.systemDataId&&(u=!1,!(u=n?n.parseFromString(d.body,"text/html"):(a.innerHTML=d.body,a))||(l=u.querySelector(".thumb-image")||u.querySelector("img[alt]"))&&(d.assetUrl=l.getAttribute("data-src")||l.getAttribute("src"),d.systemDataId="true",d.originalSize=l.getAttribute("data-image-dimensions")||"",(c=l.getAttribute("data-image-focal-point")||"0.5,0.5")&&(m=c.split(","),d.mediaFocalPoint={x:m[0],y:m[1]})),a.innerHTML=""),h.showShareButtons&&"noShare"!=h.showShareButtons&&(d.summaryShareButtons=q(d,h)),!(d.location&&d.location.addressLine1||d.location&&d.location.addressLine2||d.location&&(d.location.addressTitle||d.location.mapLat&&40.7207559!=d.location.mapLat))||"location"!==h.primaryMetadata&&"location"!==h.secondaryMetadata||(d.location.addressLine1=d.location.addressLine1||"",d.location.addressLine2=d.location.addressLine2||"",d.location.addressCountry=d.location.addressCountry||"",d.location.addressTitle=d.location.addressTitle||"",d.address=(d.location.addressLine1+" "+d.location.addressLine2+" "+d.location.addressCountry).trim(),d.mapUrl="https://maps.google.com?q="+encodeURIComponent(d.address),d.addressText=d.location.addressTitle?d.location.addressTitle:d.address),h.alternateImages&&(d.items&&d.items[1]?d.alternateImage=F(d.items[1],h.imageAspectRatio):d.alt_image&&(d.alternateImage=F(d.alt_image,h.imageAspectRatio))),-1===h.startItems.indexOf(d.id)){var p;try{if(h.renderItemDataFunction&&"function"==typeof h.renderItemDataFunction)try{d=h.renderItemDataFunction(d,h)||d}catch(e){console.warn(e)}if(d.metaContent=w.expand(d)||"",p=f.expand(d)){var g=!1;if((g=n?((g=n.parseFromString(p,"text/html")).querySelectorAll("noscript").forEach(function(e){e.parentNode.removeChild(e)}),g.body.firstChild):(a.innerHTML=p,a.firstChild))&&g._node){if(g._node._LZSData=d,h.afterRenderItemFunction&&"function"==typeof h.afterRenderItemFunction)try{g=h.afterRenderItemFunction(g,d)||g}catch(e){console.warn(e)}d.summ_config=null,t.push(g),h.builtItems.push(d.id)}else{if(g._LZSData=d,h.afterRenderItemFunction&&"function"==typeof h.afterRenderItemFunction)try{g=h.afterRenderItemFunction(g,d)||g}catch(e){console.warn(e)}d.summ_config=null,t._nodes&&t.push(g),h.builtItems.push(d.id)}}}catch(e){console.log(e,d,s)}}}h.new_items=(!h.loadAllOrPag||h.__all_loaded)&&!h.loadAllOrPag&&h.new_items&&h.new_items.size()?h.new_items.concat(t):t}b&&h.new_items.size()&&e(new Y.NodeList(h.new_items._nodes.splice(0,b))),e(t)})}function F(e,t){if(e){t=t||1;var a,n="0.5,0.5";return e.mediaFocalPoint&&(n=e.mediaFocalPoint.x+","+e.mediaFocalPoint.y),e.title&&0<e.title.length&&(a=e.title),!a&&e.body&&0<e.body.length&&(a=e.body.replace(/<(?:.|\n)*?>/gm,"")),!a&&e.filename&&0<e.filename.length&&(a=e.filename),a=(a=a&&p(a))||"",'<img class="summary-thumbnail-image summary-thumbnail-image-alternate" data-parent-ratio="'+t+'" data-image="'+e.assetUrl+'" data-src="'+e.assetUrl+'" data-image-dimensions="'+(e.originalSize||"")+'" data-image-focal-point="'+n+'" alt="'+a+'" />'}}function M(e){e.hasClass("share-click-initialized")||e.delegate("click",function(e){var t,a,n,r,o;a=(t=(t=e)||window.event).currentTarget,n=Math.floor(((screen.availWidth||1366)-680)/2),r=Math.floor(((screen.availHeight||700)-460)/2),(o=window.open(a.getAttribute("href"),"social","width=680,height=460,left="+n+",top="+r+",location=0,menubar=0,toolbar=0,status=0,scrollbars=1,resizable=1"))&&(o.focus(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.preventDefault&&t.preventDefault(),t.returnValue=!1)},".summary-share-button"),Y.all(".summary-share-buttons:not(.initialized)").each(function(e){var a=e.getAttribute("data-item-path");-1<a.indexOf("http")||(a=location.origin+a),e.setAttribute("data-item-path",a),e.all(".summary-share-button").each(function(e){var t=e.getAttribute("href")+a;e.setAttribute("href",t)}),e.addClass("initialized")})}function U(o){M(o);var s,t=null;o.one(".sqs-gallery")&&o.one(".sqs-gallery").getData("gallery")&&(s=o.one(".sqs-gallery").getData("gallery"),t=s["gallery-design"]);function e(){var r=o.hasClass("performance-mode-used");r||t&&t._renderUI&&t._renderUI(),o.all(".summary-thumbnail-container img").each(function(e){var t,a,n;o.LazySummariesData&&o.LazySummariesData.imageAspectRatio&&"Auto"!==o.LazySummariesData.imageAspectRatio&&"autocolumns"!==o.LazySummariesData.design&&((t=e.get("parentNode"))&&!t._node.style.paddingBottom&&t.setStyles({paddingBottom:100/parseFloat(o.LazySummariesData.imageAspectRatio)+"%",height:0,overflow:"hidden"})),r?(a=e.getAttribute("data-src"),n=e.getAttribute("src"),a&&!n&&(e._node.onload=function(){this.classList.add("loaded")},e.setStyles({position:"absolute",height:"100%",objectFit:"cover"}).setAttribute("src",a))):(e.hasClass("loaded")||(e._node.onload=function(){this.classList.add("loaded")}),e.loader?e.width()&&(o.hasClass("isotope-filter-used")||e.fire("refresh")):(Y.Squarespace.Loader2&&e.plug(Y.Squarespace.Loader2,{load:!0,mode:"fill"}),e.fire("refresh")))})}var a,n,r,i=o.all(".summary-item").addClass("positioned");if(s&&t?(t.imageRegions&&(t.imageRegions=[]),t.dimensions&&(t.dimensions=[]),o.hasClass("isotope-filter-used")||o.hasClass("performance-mode-used")?e():(s.set("slides",i),a=new Y.NodeList,n=new Y.NodeList,i.each(function(e){var t=e.getAttribute("data-type");if(t)switch(t){case"image":e.one(".summary-thumbnail img")&&a.push(e.one("img"));break;case"video":n.push(e)}}),s._images=a,s._imagesByMedia={image:a},s._slidesByMedia={image:a,video:n},s.set("elements.imageContainers",o.all(".sqs-gallery-image-container")),s.set("elements.metaContainers",o.all(".sqs-gallery-meta-container")),"GalleryDesignCarousel"==t.name&&(t._state.data.totalSlides.value=i.size(),t._state.data.totalSlides.readOnly=!1,t._state.data.totalGroups.readOnly=!1,t.set("totalSlides",i.size()),t.set("totalGroups",i.size()/t.get("slidesPerRow")),t._syncUI&&t._syncUI()),t._renderUI&&t._renderUI(),s.plugLoaders&&s.plugLoaders(),t._evaluateBricks&&t._evaluateBricks(),t._processImages&&t._processImages(),t.loadItems&&t.loadItems(),t.get("lightbox")&&Y.SQS.Gallery&&Y.SQS.Gallery.Manager&&Y.SQS.Gallery.Manager.lightboxify&&Y.SQS.Gallery.Manager.lightboxify(t.get("lightbox"),i),s.onceAfter("refresh",function(){var e=o.all("img:not(.loaded)"),a=0,n=e.size(),r=!1;n&&e.on("load",function(e){4==++a&&s.refresh(),n<=a&&!r&&(s.refresh(),r=!0);var t=e.currentTarget;t.hasClass("loaded")||t.addClass("loaded")}),o.all(".summary-thumbnail img[src]").each(function(e){e.fire("refresh")}),e.each(function(e){e.loader?e.loader.set("load",!0):Y.Squarespace.Loader2&&e.plug(Y.Squarespace.Loader2,{load:!0}),e.loader?e.loader.load():ImageLoader&&ImageLoader.load(e,{load:!0})}),t._updateControls&&(t.get("currentGroup")<0&&t.set("currentGroup",0),t._syncUI(),t.get("totalGroups"))}),s.refresh())):e(),o.all(".summary-thumbnail-image-alternate").each(function(e){e&&(e.loader?(e.loader.set("mode","fill"),e.fire("refresh")):Y.Squarespace.Loader2?e.plug(Y.Squarespace.Loader2,{mode:"fill",load:!0}):window.ImageLoader&&window.ImageLoader.load(e,{mode:"fill",load:!0}))}),o.LazySummariesData&&o.LazySummariesData.enableLazyBody&&window.Squarespace&&window.Squarespace.initializeLayoutBlocks&&window.Squarespace.initializeLayoutBlocks(Y,o),o.ancestor(".sqpl-tab")&&((r=document.createEvent("HTMLEvents")).initEvent("resize",!0,!1),window.dispatchEvent(r)),o.LazySummariesData&&o.LazySummariesData.refreshFunction&&"function"==typeof o.LazySummariesData.refreshFunction)try{o.LazySummariesData.refreshFunction(o,o.LazySummariesData)}catch(e){console.warn(e)}}function O(e,t){t._blockItems&&e._nodes&&(t._blockItems=t._blockItems.concat(e)),t.CustomFilter?(t.CustomFilter.filterAnim=!1,(t.CustomFilter.isotope||t.hasClass("isotope-filter-used"))&&t.one(".summary-item-list")&&t.one(".summary-item-list").append(e),t.CustomFilter.addItems(e)):(t.config&&t.config.sortSummaryItems&&t.config.sortSummaryItems,e&&e.size()&&t.one(".summary-item-list")&&t.one(".summary-item-list").append(e),U(t)),Y.fire("lazy-items-added",t),t.config.enableLazyBody}function E(e){for(var t=e.summItems,a=[],n=t.length,r=e.filter&&(e.filter.featured||e.filter.category||e.filter.categoryIds||e.filter.tag),o=e.lazyFilter&&(e.lazyFilter.featured||e.lazyFilter.category||e.lazyFilter.tag),s=0;s<n;s++){var i,l=t[s],c=0;r&&c--,r&&(e.filter.featured&&(l.starred?c++:c--),e.filter.categoryIds?l.categoryIds&&D(e.filter.categoryIds,l.categoryIds)?c++:c--:e.filter.category&&!l.hasOwnProperty("categoryIds")&&(l.categories&&D(e.filter.category.split(","),l.categories)?c++:c--),e.filter.tag&&(l.tags&&D(e.filter.tag.split(","),l.tags)?c++:c--)),-1<c&&(e.enableLazyFilter?(i=0,o&&i--,e.lazyFilter.featured&&(l.starred?i++:i--),e.lazyFilter.category&&!l.hasOwnProperty("categoryIds")&&(l.categories&&D(e.lazyFilter.category.split(","),l.categories)?i++:i--),e.lazyFilter.tag&&(l.tags&&D(e.lazyFilter.tag.split(","),l.tags)?i++:i--),-1<i&&a.push(l)):a.push(l))}return e.summItems=a,e}function P(e){e.each(function(e){e.one(".original-price")&&e.addClass("on-sale")})}function I(w,e){!function(a){{var n,r,e;a.config||(n=a.getAttribute("data-block-json")?JSON.parse(a.getAttribute("data-block-json")):{ignoreInit:!1},r=a.one(".sqs-gallery")&&a.one(".sqs-gallery").getData("gallery"),(e=r&&r["gallery-design"])&&e.name&&!e.overrided&&("GalleryDesignAutoGrid"==e.name?(G(),Y.Squarespace.GalleryManager&&(Y.Squarespace.GalleryManager._galleries&&Y.Squarespace.GalleryManager._galleries.length&&Y.Squarespace.GalleryManager._galleries.forEach(function(e,t){r._yuid===e._yuid&&(e.after("destroy",function(){a.all(".summary-item").setStyle(""),n.ignoreInit||Y.Squarespace.GalleryManager.initializeBlock(a)}),e.destroy(),Y.Squarespace.GalleryManager._galleries.splice(t,1))}),r=null)):"GalleryDesignAutocolumns"==e.name?(B(),Y.Squarespace.GalleryManager&&(Y.Squarespace.GalleryManager._galleries&&Y.Squarespace.GalleryManager._galleries.length&&Y.Squarespace.GalleryManager._galleries.forEach(function(e,t){r._yuid===e._yuid&&(e.after("destroy",function(){a.all(".summary-item").setStyle(""),n.ignoreInit||Y.Squarespace.GalleryManager.initializeBlock(a)}),e.destroy(),Y.Squarespace.GalleryManager._galleries.splice(t,1))}),r=null)):"GalleryDesignCarousel"==e.name&&(j(e),a.all(".summary-item").setStyle(""),setTimeout(function(){},20)),e.overrided=!0))}}(w),Y.fire("start-init-lazy-summary",w),w.all(".summary-item").each(function(e){var t,a,n=!!e.one(".summary-metadata-container--below-content")&&e.one(".summary-metadata-container--below-content").getContent();n&&(t=e.one(".summary-metadata-container--above-title"),a=e.one(".summary-metadata-container--below-title"),t&&t.setContent(n),a&&a.setContent(n))}),w.one(".loadMoreButtonWrapper")&&w.one(".loadMoreButtonWrapper").remove();var t=w.getAttribute("id"),v=e||(w.getAttribute("data-block-json")?JSON.parse(w.getAttribute("data-block-json")):Y.Widget.getByNode(w)?Y.Widget.getByNode(w).get("model").getAttrs():{}),a=!!w.one('[class*="summary-block-collection-type-events"]')||!!w.one(".summary-item-record-type-event");w.one(".lazy-loaded-item")&&w.all(".lazy-loaded-item").remove(),w._blockItems=null;var n,r,S=[];w.one(".summary-block-wrapper")&&w.one(".summary-block-wrapper").removeClass("summary-block-setting-primary-metadata-share-buttons")&&w.one(".summary-block-wrapper").removeClass("summary-block-setting-secondary-metadata-share-buttons"),window.customLazySummaries?(window.customLazySummaries.general&&(n=R({},window.customLazySummaries.general),window.customLazySummaries.general&&(v=R(n,v))),window.customLazySummaries.separate&&window.customLazySummaries.separate.length&&window.customLazySummaries.separate.forEach(function(e){(e.id&&e.id===t||e.collectionId&&-1<e.collectionId.indexOf(v.collectionId))&&(v=R(v,e))})):v=R({enableLazy:!1,loadAllOrPag:!1,loadMoreText:"Load More..",alternateImages:!1,buttonsIconColor:"black",buttonsIconStyle:"square-border",buttonsIconSize:"small",buttonsIconAlignment:"center",sortSummaryItems:"no-sort"},v),window.customLazySummaries&&window.customLazySummaries["*"]&&window.customLazySummaries["*"].hooks&&((r=window.customLazySummaries["*"].hooks.beforeInit)&&"function"==typeof r&&r(w,v)),v.hideLoadMore?w.addClass("summary-hideLoadMore"):w.removeClass("summary-hideLoadMore");var I=R({},v);v.originalCollectionUrl=I.collectionUrl;var o=v.readMoreText;v.readMoreText="Read More â†’";var s=w.one(".summary-read-more-link");if(s&&(v.readMoreText=s.get("textContent")),o&&(v.readMoreText=o),(w.config=v).startFunction&&"function"==typeof v.startFunction)try{v.startFunction(w,v)}catch(e){console.warn(e)}v.emptySlides&&w.one(".summary-item-list").empty();var i=!v.collectionId;if(w._blockItems=i?new Y.NodeList:w.all(".summary-item"),w.all(".summary-item:not(.lazy-loaded-item)").each(function(e,t){e.hasAttribute("data-start-index")||e.setAttribute("data-start-index",t)}),v.existedItems=i?new Y.NodeList:w.all(".summary-item:not(.lazy-loaded-item)"),v.startItemsFunction&&"function"==typeof v.startItemsFunction)try{v.existedItems.each(function(e){v.startItemsFunction(e,v)})}catch(e){console.warn(e)}P(w._blockItems),x(w),v.showShareButtons&&"noShare"!==v.showShareButtons&&(Y.one("#summarySocIcons")||Y.one("body").append('<svg id="summarySocIcons" xmlns="http://www.w3.org/2000/svg" version="1.1" style="display:none"><symbol id="ss-twitter-icon" viewBox="0 0 64 64"> <path d="M48,22.1c-1.2,0.5-2.4,0.9-3.8,1c1.4-0.8,2.4-2.1,2.9-3.6c-1.3,0.8-2.7,1.3-4.2,1.6 C41.7,19.8,40,19,38.2,19c-3.6,0-6.6,2.9-6.6,6.6c0,0.5,0.1,1,0.2,1.5c-5.5-0.3-10.3-2.9-13.5-6.9c-0.6,1-0.9,2.1-0.9,3.3 c0,2.3,1.2,4.3,2.9,5.5c-1.1,0-2.1-0.3-3-0.8c0,0,0,0.1,0,0.1c0,3.2,2.3,5.8,5.3,6.4c-0.6,0.1-1.1,0.2-1.7,0.2c-0.4,0-0.8,0-1.2-0.1 c0.8,2.6,3.3,4.5,6.1,4.6c-2.2,1.8-5.1,2.8-8.2,2.8c-0.5,0-1.1,0-1.6-0.1c2.9,1.9,6.4,2.9,10.1,2.9c12.1,0,18.7-10,18.7-18.7 c0-0.3,0-0.6,0-0.8C46,24.5,47.1,23.4,48,22.1z"></path></symbol><symbol id="ss-twitter-mask" viewBox="0 0 64 64"> <path d="M0,0v64h64V0H0z M44.7,25.5c0,0.3,0,0.6,0,0.8C44.7,35,38.1,45,26.1,45c-3.7,0-7.2-1.1-10.1-2.9 c0.5,0.1,1,0.1,1.6,0.1c3.1,0,5.9-1,8.2-2.8c-2.9-0.1-5.3-2-6.1-4.6c0.4,0.1,0.8,0.1,1.2,0.1c0.6,0,1.2-0.1,1.7-0.2 c-3-0.6-5.3-3.3-5.3-6.4c0,0,0-0.1,0-0.1c0.9,0.5,1.9,0.8,3,0.8c-1.8-1.2-2.9-3.2-2.9-5.5c0-1.2,0.3-2.3,0.9-3.3 c3.2,4,8.1,6.6,13.5,6.9c-0.1-0.5-0.2-1-0.2-1.5c0-3.6,2.9-6.6,6.6-6.6c1.9,0,3.6,0.8,4.8,2.1c1.5-0.3,2.9-0.8,4.2-1.6 c-0.5,1.5-1.5,2.8-2.9,3.6c1.3-0.2,2.6-0.5,3.8-1C47.1,23.4,46,24.5,44.7,25.5z"></path></symbol><symbol id="ss-facebook-icon" viewBox="0 0 64 64"><path d="M34.1,47V33.3h4.6l0.7-5.3h-5.3v-3.4c0-1.5,0.4-2.6,2.6-2.6l2.8,0v-4.8c-0.5-0.1-2.2-0.2-4.1-0.2 c-4.1,0-6.9,2.5-6.9,7V28H24v5.3h4.6V47H34.1z"></path></symbol><symbol id="ss-facebook-mask" viewBox="0 0 64 64"><path d="M0,0v64h64V0H0z M39.6,22l-2.8,0c-2.2,0-2.6,1.1-2.6,2.6V28h5.3l-0.7,5.3h-4.6V47h-5.5V33.3H24V28h4.6V24 c0-4.6,2.8-7,6.9-7c2,0,3.6,0.1,4.1,0.2V22z"></path></symbol><symbol id="ss-linkedin-icon" viewBox="0 0 64 64"><path d="M20.4,44h5.4V26.6h-5.4V44z M23.1,18c-1.7,0-3.1,1.4-3.1,3.1c0,1.7,1.4,3.1,3.1,3.1 c1.7,0,3.1-1.4,3.1-3.1C26.2,19.4,24.8,18,23.1,18z M39.5,26.2c-2.6,0-4.4,1.4-5.1,2.8h-0.1v-2.4h-5.2V44h5.4v-8.6 c0-2.3,0.4-4.5,3.2-4.5c2.8,0,2.8,2.6,2.8,4.6V44H46v-9.5C46,29.8,45,26.2,39.5,26.2z"></path></symbol> <symbol id="ss-linkedin-mask" viewBox="0 0 64 64"><path d="M0,0v64h64V0H0z M25.8,44h-5.4V26.6h5.4V44z M23.1,24.3c-1.7,0-3.1-1.4-3.1-3.1c0-1.7,1.4-3.1,3.1-3.1 c1.7,0,3.1,1.4,3.1,3.1C26.2,22.9,24.8,24.3,23.1,24.3z M46,44h-5.4v-8.4c0-2,0-4.6-2.8-4.6c-2.8,0-3.2,2.2-3.2,4.5V44h-5.4V26.6 h5.2V29h0.1c0.7-1.4,2.5-2.8,5.1-2.8c5.5,0,6.5,3.6,6.5,8.3V44z"></path></symbol></svg>'),w.one(".summary-block-wrapper")&&w.one(".summary-block-wrapper").addClass("summary-block-setting-"+v.showShareButtons+"-metadata-share-buttons"),w.all(".summary-item:not(.share-buttons-inited)").each(function(e){var t,a,n=!!e.one("a")&&e.one("a").getAttribute("href"),r=!!e.one(".summary-title-link")&&e.one(".summary-title-link")._node.textContent;n&&r&&((t=e.all(".summary-metadata"))&&t.size()&&(a=q({id:"",fullUrl:n,title:r},v),t.each(function(e){e.one(".summary-share-buttons")||e.append(a)}),e.addClass("share-buttons-inited")))}),M(w)),v.showReadMoreLink&&w.all(".summary-item:not(.lazy-loaded-item)").each(function(e){var t,a=e.one("a.summary-thumbnail-container")||e.one(".summary-title-link");e.one(".summary-read-more-link")?(e.one(".summary-read-more-link").set("textContent",v.readMoreText),a&&(a=a.getAttribute("href"),e.one(".summary-read-more-link").setAttribute("href",a))):(t=e.one(".summary-metadata-container--below-title"),(a=a&&a.getAttribute("href"))&&t.insert('<a href="'+a+'" data-ajax-loader="ajax-loader-binded" class="summary-read-more-link">'+v.readMoreText+"</a>","after"))});var k,l,_,T,c=!1;if(v.customLazyIndex&&v.customLazyIndexUrl&&(c=v.customLazyIndexUrl.trim()),(!v.collectionId||v.collectionId.length<3)&&(w.one(".sqs-blockStatus--overlayMode")&&w.one(".sqs-blockStatus--overlayMode").remove(),w.one(".summary-item-list")&&w.one(".summary-item-list").empty(),w.one("[data-block-state]")&&w.one("[data-block-state]").removeAttribute("data-block-state")),v.collectionUrl=c||(v.collectionUrl?v.collectionUrl:w.one(".summary-title-link")?"/"+w.one(".summary-title-link").get("pathname").split("/")[1]:""),w.LazySummariesData=v,w._node&&(w._node.LazySummariesData=v),v.startRenderFunction&&"function"==typeof v.startRenderFunction)try{v.startRenderFunction(w,v)}catch(e){console.warn(e)}v.collectionUrl&&v.enableLazy||v.collectionUrl&&v.alternateImages||v.collectionUrl&&v.enableLazyBody?(function(e){try{var t=window.Static&&Static.SQUARESPACE_CONTEXT,a=!!e&&function(e){return e?e.replace(/[^\-a-zA-Z0-9\s]+/gi,"").replace(/\s/g,"-").toLowerCase():""}(e);if(a&&window.___sqs_plugins_ga&&window.___sqs_plugins_ga[a])return;var n={pluginName:"Lazy Summaries",pluginPage:t&&t.website.baseUrl?t.website.baseUrl+location.pathname:location.href,pageTitle:document.title,pluginData:e||"No plugin data",siteTitle:t&&t.website.siteTitle||"",siteUrl:t&&t.website.baseUrl||location.origin};a&&(window.___sqs_plugins_ga||(window.___sqs_plugins_ga={}),window.___sqs_plugins_ga[a]=!0),setTimeout(function(){var e;N&&((e=new XMLHttpRequest).open("POST","https://tools.squarewebsites.org/api/sqs-plugins",!0),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.send(JSON.stringify(n)))},3e4)}catch(e){console.log(e)}}("Summary ID: #"+w.getAttribute("id")+"\nCollection Url: "+v.collectionUrl),w.addClass("lazy-summary-enabled"),w.one(".lazy-loading-status")||w.append('<div class="lazy-loading-status sqs-spin hide-after-spin"><div class="sqs-spin-content"></div></div>'),C&&console.log(v),v.isEventsCollection=a,v.startItems=S,k=function(e){if(e)return m}(w),l=v.useSessionCache||!1,v.enableLazyFilter||!v.filter||!v.filter.tag&&!v.filter.category||c||(v.collectionUrl+=v.filter.category?"?category="+v.filter.category.trim().replace(/\+/g,"%2B").replace(/ /g,"+").replace(/%20/g,"+").replace(/&/g,"%26"):"?",v.collectionUrl+=v.filter.tag?(-1<v.collectionUrl.indexOf("?")&&-1<v.collectionUrl.indexOf("category=")?"&":"")+"tag="+v.filter.tag.trim().replace(/\+/g,"%2B").replace(/ /g,"+").replace(/%20/g,"+").replace(/%20/g,"+").replace(/&/g,"%26"):""),v.enableLazy&&w.addClass("lazy-summary-loading"),v.getCollectionItems&&(v.getFromStorage=z,v.saveToStorage=A,g=v.getCollectionItems),_=!1,T=v.filter&&(v.filter.featured||v.filter.category||v.filter.tag),g(v.collectionUrl,l,c,w._node.LazySummariesData,w).then(function(s){if(s.items&&s.items.length&&s.nestedCategories&&s.nestedCategories.tree&&s.items.forEach(function(e){var a,t,n;e.categoryIds&&(e.categories=(a=s,n=[],(t=e)&&t.categoryIds&&a&&a.nestedCategories&&a.nestedCategories.tree&&t.categoryIds.forEach(function(e){var t=a.nestedCategories.tree[e];t&&(n.push(t.displayName),t.parentCategoryId&&a.nestedCategories.tree[t.parentCategoryId]&&n.push(a.nestedCategories.tree[t.parentCategoryId].displayName))}),n))}),v.transformExternalDataFunction&&"function"==typeof v.transformExternalDataFunction)try{s=v.transformExternalDataFunction(s,v)||s}catch(e){console.warn(e)}if(v.summItems=v.isEventsCollection&&s[v.showPastOrUpcomingEvents]&&s[v.showPastOrUpcomingEvents].length?s[v.showPastOrUpcomingEvents]:s.items,v.customLazyIndex&&v.customLazyIndexUrl&&v.isEventsCollection&&(v.summItems=v.summItems.filter(function(e){return e[v.showPastOrUpcomingEvents]})),T&&(v=E(v)),!_){w.removeClass("lazy-summary-loading"),w.addClass("lazy-summary-loaded");var e=v.existedItems,t=e.size();if(t){function a(e,t,a,n){if(e){var r=t.body||"";e.setAttribute("data-id",t.id),e.setAttribute("data-like-count",t.likeCount);var o,s=t.likeCount||0;if(e.setAttribute("data-like-count",s),S.push(t.id),t.summ_config=I,v.renderItemDataFunction&&"function"==typeof v.renderItemDataFunction)try{t=v.renderItemDataFunction(t,v)||t}catch(e){console.warn(e)}if(e._node._LZSData=t,v.afterRenderItemFunction&&"function"==typeof v.afterRenderItemFunction)try{e=v.afterRenderItemFunction(e,t)||e}catch(e){console.warn(e)}t.starred&&e.addClass("item-featured"),v.followSourceUrl&&(o=t.clickthroughUrl&&t.clickthroughUrl!=t.urlId?t.clickthroughUrl:t.sourceUrl&&t.sourceUrl!=t.urlId?t.sourceUrl:t.fullUrl,e.all("a.summary-title-link,a.summary-thumbnail-container").setAttribute("target","_blank").setAttribute("href",o)),delete t.summ_config;var i,l=e.one(".summary-thumbnail-container");l&&!l.getAttribute("data-description")&&t.excerpt&&l.setAttribute("data-description",t.excerpt),v.enableLazyBody&&(e.one(".excerpt-as-body-inited")&&e.one(".excerpt-as-body-inited").remove(),l&&!l.getAttribute("data-description")&&l.setAttribute("data-description",r),e.one(".summary-excerpt")&&!e.one(".summary-excerpt").hasClass("excerpt-as-body-inited")?(e.one(".summary-excerpt")._node.innerHTML=r,e.one(".summary-excerpt").addClass("excerpt-as-body-inited")):e.one(".summary-metadata-container--below-content")&&(i=Y.Node.create('<div class="summary-excerpt excerpt-as-body-inited">'+r+"</div>"),e.one(".summary-metadata-container--below-content").insert(i,"before"))),v.alternateImages&&function(e,t,a,n){{var r,o;-1<t.startItems.indexOf(a.id)&&t.alternateImages&&(a.items&&a.items.length&&1<a.items.length||a.alt_image)&&((r=n?n.one(".summary-thumbnail-container"):e.one('.summary-item[data-id="'+a.id+'"] .summary-thumbnail-container'))&&(r.one(".summary-thumbnail-image-alternate")||(r.one(".img-wrapper")||r).append(F(a.items&&a.items.length&&a.items[1]||a.alt_image,t.imageAspectRatio)),(o=r.one(".summary-thumbnail-image-alternate"))&&(o.loader?o.loader.set("mode","fill"):o.plug(Y.Squarespace.Loader2,{mode:"fill",load:!0})),setTimeout(function(){o&&o.fire("refresh")},200)))}}(w,v,t,e),c.push(t);try{(t.sold||t.structuredContent&&(Y.Squarespace.Commerce.soldOut(t)||!function(e){if(e.variantOptions&&e.variantOptions.hasOwnProperty("qtyInStock"))return e.variantOptions.qtyInStock;var t=e.structuredContent;if(2===t.productType)return 1;for(var a=0,n=0;n<t.variants.length;n++){var r=t.variants[n];if(r.unlimited)return 1;a+=r.qtyInStock}return a}(t)))&&e.addClass("sold-out"),(t.sale||t.structuredContent&&Y.Squarespace.Commerce.onSale(t))&&e.addClass("on-sale")}catch(e){console.log(e)}}}var c=[],n=w.CustomFilter&&w.CustomFilter.isotope?w:e.toFrag();if(n&&e.size()){for(var r,o,i,l,m,u,d,p,g,f,h,y=0;y<v.summItems.length;y++){c.length<t+1&&(o=(r=v.summItems[y]).clickthroughUrl||r.sourceUrl||r.fullUrl,i=r.id,l=r.systemDataId?r.systemDataId:!(!r.items||!r.items.length)&&r.items[0].systemDataId,m=r.mainImage?r.mainImage.assetUrl:r.items&&r.items.length&&r.items[0].assetUrl?r.items[0].assetUrl:r.systemDataId&&r.assetUrl,u=r.assetUrl&&r.assetUrl,(p=!!((d=r.title&&r.title.trim())&&o&&n.one('.summary-title-link[href="'+o+'"]')&&n.one('.summary-title-link[href="'+o+'"]').get("textContent").replace(/\r?\n|\r/g,"").trim()===d)&&n.one('.summary-title-link[href="'+o+'"]').ancestor(".summary-item"))?a(p,r):(h=(h=l&&n.all('[data-src*="'+l+'"]').size()?n.all('[data-src*="'+l+'"]'):m&&n.all('[data-src*="'+m+'"]').size()?n.all('[data-src*="'+m+'"]'):u&&n.all('[data-src*="'+u+'"]'))&&0<h.size()&&h.item(0)||!1)?a(h.ancestor(".summary-item"),r):(g=n.one('[data-id="'+i+'"]'))?a(g,r):(8==r.recordType||"video"==r.recordTypeLabel)&&r.oembed&&r.oembed.html?n.all(".summary-item-record-type-video").some(function(e){var t=e.one(".summary-thumbnail-container>.sqs-video-wrapper");if(t&&t.getAttribute("data-html")==r.oembed.html)return a(e,r),!0}):(f=o&&n.one('.summary-title-link[href="'+o+'"]'))&&a(f,r))}w.CustomFilter&&w.CustomFilter.addVirtualItems&&w.CustomFilter.addVirtualItems(e,c)}x(w)}if(v.enableLazyBody&&window.Squarespace&&window.Squarespace.initializeLayoutBlocks&&window.Squarespace.initializeLayoutBlocks(Y,w),Y.fire("lazy-summary-start-items-processed",w),v.portionItemsAddedFunction&&"function"==typeof v.portionItemsAddedFunction)try{v.portionItemsAddedFunction(w,v)}catch(e){console.warn(e)}}var b;T||(v=E(v)),v.ajaxData=s,((b=v).isEventsCollection?b.ajaxData[b.showPastOrUpcomingEvents]:b.ajaxData.items).length,b.enableLazyFilter&&b.existedItems.size()&&b.existedItems.each(function(e,t){var a,n;e._node._LZSData&&(a=e._node._LZSData,n=0,b.lazyFilter.featured&&(a.starred?n++:n--),b.lazyFilter.category&&a.categories&&a.categories.length&&!a.hasOwnProperty("categoryIds")&&(a.categories&&D(b.lazyFilter.category.split(","),a.categories)?n++:n--),b.lazyFilter.tag&&(a.tags&&D(b.lazyFilter.tag.split(","),a.tags)?n++:n--),n<0&&(e._node._LZSData=null,e.remove()))}),v.lazyFilter&&v.lazyFilter.customLogic&&(v.summItems=v.lazyFilter.customLogic(v.summItems,v.currentItem,{arrayMatch:D})||v.summItems),v.enableLazy?L(k,v,I).then(function(e){if(P(e),w.config&&w.config.sortSummaryItems&&"no-sort"!=w.config.sortSummaryItems&&(e=x(w,e)),v.allItemsRenderedFunction&&"function"==typeof v.allItemsRenderedFunction)try{e=v.allItemsRenderedFunction(e,v)||e}catch(e){console.warn(e)}var t,a;if(w.one(".sqs-gallery")&&w.one(".sqs-gallery").getData("gallery")&&((t=w.one(".sqs-gallery").getData("gallery")["gallery-design"])&&t._getProperty&&t._getProperty("SLIDE_CLASS")&&e&&e.size()&&e.addClass(t._getProperty("SLIDE_CLASS"))),w.CustomFilter&&e&&e.size()&&w.CustomFilter.addVirtualItems&&(a=v.isEventsCollection?s[v.showPastOrUpcomingEvents]:s.items,w.CustomFilter.addVirtualItems(e,a)),v.loadAllOrPag||w.CustomFilter){if(C&&console.log(v),v.new_items){if(O(v.new_items,w),Y.fire("lazy-items-all-added",w),v.allItemsAddedFunction&&"function"==typeof v.allItemsAddedFunction)try{v.allItemsAddedFunction(w,v)}catch(e){console.warn(e)}v.summItems=[],v.new_items=null}}else{var n=v.loadMoreText?v.loadMoreText:"Load More";if(v.loadPageSize=v.loadPageSize||5,!w.one(".loadMoreButton")&&v.summItems&&v.summItems.length&&w.one(".summary-block-wrapper")){w.one(".summary-item-list-container").append('<div class="sqs-block-button sqs-block loadMoreButtonWrapper" style="display:inline-block;width:100%;float:none;margin-top:'+v.gutter/2+'px"><div class="sqs-block-button-container--center" data-alignment="center"><button class="loadMoreButton sqs-block-button-element--small sqs-block-button-element" style="opacity: 0;" data-page-size="'+v.loadPageSize+'">'+n+"</button></div></div>"),w.one(".loadMoreButton").setAttribute("data-items-left",v.new_items.size()),w.one(".loadMoreButton").show(!0);function r(e){e.halt&&e.halt();var t=e.currentTarget?parseInt(e.currentTarget.getAttribute("data-page-size")):e.size?e.size:5;if(v.ajaxData&&v.summItems)if(v.new_items&&v.new_items.size()){if(O(new Y.NodeList(v.new_items._nodes.splice(0,t)),w),Y.fire("lazy-items-portion-added",w),v.portionItemsAddedFunction&&"function"==typeof v.portionItemsAddedFunction)try{v.portionItemsAddedFunction(w,v)}catch(e){console.warn(e)}v.new_items&&w.one(".loadMoreButton").setAttribute("data-items-left",v.new_items.size()),v.new_items&&v.new_items.size()||w.one(".loadMoreButtonWrapper").hide(!0)}else if(w.one(".loadMoreButtonWrapper").hide(!0),Y.fire("lazy-items-all-added",w),v.allItemsAddedFunction&&"function"==typeof v.allItemsAddedFunction)try{v.allItemsAddedFunction(w,v)}catch(e){console.warn(e)}}w.one(".loadMoreButton").on("click",r);var o=w.all(".summary-item").size();o<v.pageSize&&r({size:v.pageSize-o})}else if(v.new_items&&w.one(".loadMoreButton")&&w.one(".loadMoreButton").setAttribute("data-items-left",v.new_items.size()),v.__filterActive&&w.CustomFilter&&v.new_items&&v.new_items.size()){if(v.allItemsAddedFunction&&"function"==typeof v.allItemsAddedFunction)try{v.allItemsAddedFunction(w,v)}catch(e){console.warn(e)}v.__all_loaded?w.fire("custom-filter:sort-grid",{customFilter:w.CustomFilter}):(O(v.new_items,w),v.summItems=[],v.new_items=null)}}w.__customFilter_filteringEvent||(w.__customFilter_filteringEvent=w.on("custom-filter:sort-grid",function(e){e&&e.customFilter&&!e.customFilter.all_lazy_added&&(e.customFilter.searchRegex||e.customFilter.filter_selectors||e.customFilter.sort_param)&&(v.__filterActive=!0,v.__all_loaded&&(e.customFilter.all_lazy_added=!0,v.new_items&&v.new_items.size()&&(e.customFilter.waitingForNewItems=!0,O(v.new_items,w),w.one(".loadMoreButton")&&(w.one(".loadMoreButton").setAttribute("data-items-left",0),w.one(".loadMoreButtonWrapper").hide()),Y.fire("lazy-items-all-added",w),v.summItems=[],v.new_items=null)))})),v.__all_loaded&&w.CustomFilter&&w.hasClass("cf-loadMoreButton-enabled")&&w.CustomFilter._sortGrid(),e&&!e.size()&&U(w)}):U(w),_=!0})):(w.LazySummariesData=null,w._node&&(w._node.LazySummariesData=null),v.followSourceUrl&&w.all("a.summary-title-link,a.summary-thumbnail-container").setAttribute("target","_blank"),U(w)),w.on("custom-filter:gallery-refresh",function(){U(w)}),w.one(".sqs-gallery")&&w.one(".sqs-gallery").getData("gallery")&&w.one(".sqs-gallery").getData("gallery").refresh()}function R(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]&&"object"==typeof t[a]?R(e[a],t[a]):e[a]=t[a]);return e}var k,_,T,N=!(r={});function B(e){try{if(window.Y&&Y.Squarespace&&Y.Squarespace.GalleryDesigns2&&Y.Squarespace.GalleryDesigns2.autocolumns){if((e=e||Y.Squarespace.GalleryDesigns2.autocolumns.prototype).overrided)return;e._syncUI=function(){var e=this.get("host");this.block=this.block||e.get("container").ancestor(".sqs-block");var t=this.block&&this.block.getAttribute("data-block-json")&&JSON.parse(this.block.getAttribute("data-block-json"))||this.block&&this.block.config||this.getAttrs();if(t){for(var a=window.matchMedia&&window.matchMedia("(max-width: 640px)").matches?640:window.matchMedia&&window.matchMedia("(max-width: 1024px) and (min-width: 640px)").matches?642:window.innerWidth,i=(e=e||this.get("host")).get("container").get("offsetWidth"),l=this.get("aspectRatio"),n=a<641&&t&&t.mobileSettings,r=a<1025&&641<a&&t&&t.tabletSettings,o=n&&t.mobileColumnWidth?parseInt(t.mobileColumnWidth):this.get("columnWidth"),s=n&&t.hasOwnProperty("mobileGutter")?parseInt(t.mobileGutter):r&&t.hasOwnProperty("tabletGutter")?parseInt(t.tabletGutter):parseInt(this.get("gutter")),c=Math.min(s,this.get("columnWidth")),m=this.get("mixedContent"),u="min"===this.get("columnWidthBehavior")?"floor":"ceil",d=Math[u](i/o),d=n&&t.mobileColumns?parseInt(t.mobileColumns):r&&t.tabletColumns?parseInt(t.tabletColumns):t&&t.useNumberInRow&&t.itemsInRow?parseInt(t.itemsInRow):Math.max(d,1),p=(i-c*(d-1))/d,g=Math.floor(p),f=[],h=0;h<d;h++)f[h]=0;try{this._evaluateBricks()}catch(e){}e.get("slides").each(function(e,t){var a=t%d;l||(a=f.indexOf(Math.min.apply(Math,f)));var n=g*a;0!==a&&(n+=c*a);var r=g,o=l?r/l:this._getBrickHeight(e,t,r);a===d-1&&g!==p&&(r=i-n,m||e.one(".sqs-video-wrapper")||e.addClass("slide-stretched"));var s={top:f[a]+"px",left:n+"px",width:r+"px",height:o+"px"};e.setStyles(s),o+=c,f[a]+=o},this),e.get("container").setStyle("height",Math.max.apply(Math,f)-c+"px"),Y.later(20,this,this.loadItems)}},e.overrided=!0}}catch(e){console.log(e,"Can't change autocolumns handle")}}function j(e){try{if(window.Y&&Y.Squarespace&&Y.Squarespace.GalleryDesigns2&&Y.Squarespace.GalleryDesigns2.carousel)return!(e=e||Y.Squarespace.GalleryDesigns2.carousel.prototype).overrided&&(e._getSlidesPerRow=function(){var e=this.get("slidesPerRowOriginal"),t=this.get("host");this.block=this.block||t.get("container").ancestor(".sqs-block"),this.blockId=this.block&&this.block.getAttribute("id");var a=this.block&&this.block.getAttribute("data-block-json")&&JSON.parse(this.block.getAttribute("data-block-json"))||this.block&&this.block.config||this.getAttrs(),n=window.matchMedia&&window.matchMedia("(max-width: 640px)").matches?640:window.matchMedia&&window.matchMedia("(max-width: 1024px) and (min-width: 640px)").matches?642:window.innerWidth,r=n<641&&a&&a.mobileSettings,o=n<1025&&641<n&&a&&a.tabletSettings;return this.gutter=r&&a.hasOwnProperty("mobileGutter")?parseInt(a.mobileGutter):!(!o||!a.hasOwnProperty("tabletGutter"))&&parseInt(a.tabletGutter),this.customGutter=r||o,a&&this.customGutter?e=r&&a.mobileColumns?parseInt(a.mobileColumns):o&&a.tabletColumns?parseInt(a.tabletColumns):e:window.innerWidth<480&&1<e?2:window.innerWidth<724&&2<e?3:e},e.goToGroup=function(e){var t="-"+(100*e+e*this.customGutterWidth)+"%";this.get("host").get("container").setStyle("transform","translatex("+t+")"),this.set("currentGroup",e)},e._setSlideStyles=function(){this.styles="#{{blockId}} .sqs-gallery-design-carousel-slide{width:{{sWidth}};padding-right:{{padding}};padding-left:{{padding}}}#{{blockId}} .img-wrapper,#{{blockId}} .intrinsic-inner {position:relative;padding-bottom:{{aspect}}}";var e=this.get("host").get("container"),t=e.width(),a=this.get("slidesPerRow"),n=this.hasOwnProperty("gutter")&&this.customGutter?parseInt(this.gutter)/t*100:this.get("gutter"),r=this._getProperty("CONTAINER_CLASS")+"-slides-in-view-";e.removeClass(r+".*"),e.addClass(r+a);var o=n+"%";this.customGutterWidth=n;var s=this.get("aspectRatio");e.setStyle("marginLeft","-"+o),e.all(".intrinsic-inner").setStyle("");var i={blockId:this.blockId,padding:o,sWidth:100/a+n/a+"%",aspect:s?(100/s).toFixed(2)+"%":0},l=f(this.styles,i);0<t&&(h(l,"summary-carousel-"+this.blockId,this.block),e.all("img").each(function(e){e.fire("refresh")}),e.all(".summary-item").addClass("positioned"),Y.later(20,this,this.loadItems))},e.overrided=!0)}catch(e){console.log(e,"Can't change carousel handle")}}function G(e){try{if(window.Y&&Y.Squarespace&&Y.Squarespace.GalleryDesigns2&&Y.Squarespace.GalleryDesigns2.autogrid)return!(e=e||Y.Squarespace.GalleryDesigns2.autogrid.prototype).overrided&&(e._syncUI=function(){this.styles="#{{blockId}} .sqs-gallery {margin-bottom: -{{margin}};}#{{blockId}} .sqs-gallery-design-autogrid-slide:nth-child({{nth}}n){margin-right:0}#{{blockId}} .sqs-gallery-design-autogrid-slide:nth-child({{nth}}n+1){clear:left}#{{blockId}} .sqs-gallery-design-autogrid-slide{width:{{sWidth}};margin-right:{{margin}};margin-bottom:{{margin}}}#{{blockId}} .img-wrapper,#{{blockId}} .intrinsic-inner {position:relative;padding-bottom:{{aspect}}}";var e=this.get("host"),t=window.matchMedia&&window.matchMedia("(max-width: 640px)").matches?640:window.matchMedia&&window.matchMedia("(max-width: 1024px) and (min-width: 640px)").matches?642:window.innerWidth;this.block=this.block||e.get("container").ancestor(".sqs-block"),this.blockId=this.block&&this.block.getAttribute("id");var a,n,r,o,s,i,l,c,m,u,d,p,g=this.block&&this.block.getAttribute("data-block-json")&&JSON.parse(this.block.getAttribute("data-block-json"))||this.block&&this.block.config||this.getAttrs();g&&(n=(a=e.get("container")).width(),r=t<641&&g&&g.mobileSettings,o=t<1025&&641<t&&g&&g.tabletSettings,s=r&&g.mobileColumnWidth?parseInt(g.mobileColumnWidth):this.get("columnWidth"),i=r&&g.hasOwnProperty("mobileGutter")?parseInt(g.mobileGutter):o&&g.hasOwnProperty("tabletGutter")?parseInt(g.tabletGutter):parseInt(this.get("gutter")),l="min"===this.get("columnWidthBehavior")?"floor":"ceil",c=Math[l](n/s),c=r&&g.mobileColumns?parseInt(g.mobileColumns):o&&g.tabletColumns?parseInt(g.tabletColumns):g&&g.useNumberInRow&&g.itemsInRow?parseInt(g.itemsInRow):Math.max(c,1),g&&g.itemsInRow&&a.setAttribute("data-items-in-row",g.itemsInRow),m=(n-i*(c-1))/c||0,u=this.get("aspectRatio"),a.setStyle(""),a.all(".intrinsic-inner").setStyle(""),d={blockId:this.blockId,margin:100*i/n+"%",sWidth:100*m/n+"%",nth:c,aspect:u?(100/u).toFixed(2)+"%":0},p=f(this.styles,d),0<n&&(h(p,"summary-grid-"+this.blockId,this.block),a.all("img").each(function(e){e.fire("refresh")}),a.all(".summary-item").addClass("positioned"),Y.later(20,this,this.loadItems)))},e.overrided=!0)}catch(e){console.log(e,"Can't change autogrid handle")}}function J(){m||(Y.use(["node"],function(o){function s(e,t,a){for(void 0===a&&(a=10),t+="";parseInt(e,10)<a&&1<a;a/=10)e=t+e;return e.toString()}var i={formats:{a:function(e,t){return t.a[e.getDay()]},A:function(e,t){return t.A[e.getDay()]},b:function(e,t){return t.b[e.getMonth()]},B:function(e,t){return t.B[e.getMonth()]},C:function(e){return s(parseInt(e.getFullYear()/100,10),0)},d:["getDate","0"],e:["getDate"," "],g:function(e){return s(parseInt(i.formats.G(e)%100,10),0)},G:function(e){var t=e.getFullYear(),a=parseInt(i.formats.V(e),10);return a<(e=parseInt(i.formats.W(e),10))?t++:0===e&&52<=a&&t--,t},H:["getHours","0"],I:function(e){return e=e.getHours()%12,s(0===e?12:e,0)},j:function(e){var t=new Date(e.getFullYear()+"/1/1 GMT");return e=new Date(e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()+" GMT")-t,e=parseInt(e/6e4/60/24,10)+1,s(e,0,100)},k:["getHours"," "],l:function(e){return e=e.getHours()%12,s(0===e?12:e," ")},m:function(e){return s(e.getMonth()+1,0)},M:["getMinutes","0"],p:function(e,t){return t.p[12<=e.getHours()?1:0]},P:function(e,t){return t.P[12<=e.getHours()?1:0]},s:function(e,t){return parseInt(e.getTime()/1e3,10)},S:["getSeconds","0"],u:function(e){return 0===(e=e.getDay())?7:e},U:function(e){var t=parseInt(i.formats.j(e),10);return e=6-e.getDay(),t=parseInt((t+e)/7,10),s(t,0)},V:function(e){var t=parseInt(i.formats.W(e),10),a=new Date(e.getFullYear()+"/1/1").getDay();return 53===(t=t+(4<a||a<=1?0:1))&&new Date(e.getFullYear()+"/12/31").getDay()<4?t=1:0===t&&(t=i.formats.V(new Date(e.getFullYear()-1+"/12/31"))),s(t,0)},w:"getDay",W:function(e){var t=parseInt(i.formats.j(e),10);return e=7-i.formats.u(e),t=parseInt((t+e)/7,10),s(t,0,10)},y:function(e){return s(e.getFullYear()%100,0)},Y:"getFullYear",z:function(e){return(0<(e=e.getTimezoneOffset())?"-":"+")+s(parseInt(Math.abs(e/60),10),0)+s(Math.abs(e%60),0)},Z:function(e){var t=e.toString().replace(/^.*:\d\d( GMT[+-]\d+)? \(?([A-Za-z ]+)\)?\d*$/,"$2").replace(/[a-z ]/g,"");return 4<t.length&&(t=i.formats.z(e)),t},"%":function(e){return"%"}},aggregates:{c:"locale",D:"%m/%d/%y",F:"%Y-%m-%d",h:"%b",n:"\n",r:"%I:%M:%S %p",R:"%H:%M",t:"",T:"%H:%M:%S",x:"locale",X:"locale"},format:function(n,e){if(e=e||{},!o.Lang.isDate(n))return o.Lang.isValue(n)?n:"";for(var t=e.format||"%Y-%m-%d",r=o.Intl.get("datatype-date-format")||o.Intl["datatype-date-format"],a=function(e,t){var a=i.aggregates[t];return"locale"===a?r[t]:a};t.match(/%[cDFhnrRtTxX]/);)t=t.replace(/%([cDFhnrRtTxX])/g,a);return a=void 0,t=t.replace(/%([aAbBCdegGHIjklmMpPsSuUVwWyYzZ%])/g,function(e,t){var a=i.formats[t];switch(o.Lang.type(a)){case"string":return n[a]();case"function":return a.call(n,n,r);case"array":if("string"===o.Lang.type(a[0]))return s(n[a[0]](),a[1]);default:return t}})}};o.mix(o.namespace("Date"),i),o.namespace("DataType"),o.DataType.Date=o.Date}),YUI.add("lang/datatype-date-format_en",function(e){e.Intl&&e.Intl.add("datatype-date-format","en",{a:"Sun Mon Tue Wed Thu Fri Sat".split(" "),A:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),b:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),B:"January February March April May June July August September October November December".split(" "),c:"%a, %b %d, %Y %l:%M:%S %p %Z",p:["AM","PM"],P:["am","pm"],x:"%m/%d/%y",X:"%l:%M:%S %p"})},"3.17.2"),YUI.add("datatype-date-format",function(e,t){},"3.17.2",{lang:"ar ar-JO ca ca-ES da da-DK de de-AT de-DE el el-GR en en-AU en-CA en-GB en-IE en-IN en-JO en-MY en-NZ en-PH en-SG en-US es es-AR es-BO es-CL es-CO es-EC es-ES es-MX es-PE es-PY es-US es-UY es-VE fi fi-FI fr fr-BE fr-CA fr-FR hi hi-IN hu id id-ID it it-IT ja ja-JP ko ko-KR ms ms-MY nb nb-NO nl nl-BE nl-NL pl pl-PL pt pt-BR ro ro-RO ru ru-RU sv sv-SE th th-TH tr tr-TR vi vi-VN zh-Hans zh-Hans-CN zh-Hant zh-Hant-HK zh-Hant-TW".split(" ")}),YUI.add("squarespace-date-utils",function(u){function t(e){return{monday:(e=u.Intl.get("datatype-date-format")[e])[1],tuesday:e[2],wednesday:e[3],thursday:e[4],friday:e[5],saturday:e[6],sunday:e[0]}}var s=u.namespace("Squarespace").DateUtils={LANG:{days:{full:t.call(null,"A"),abbreviated:t.call(null,"a")}},humanizeAllDates:function(e){u.all(e).each(function(e){var t=parseInt(e.getAttribute("data-date"),10);u.Lang.isNumber(t)?e.set("innerHTML",u.Squarespace.DateUtils.humanizeDate(t)):console.warn("Invalid date on node: ",e)})},humanizeDate:function(t,a){u.Lang.isDate(t)&&(t=t.getTime()),u.Lang.isString(t)&&(t=parseInt(t,10));function n(e,t){var a="";return(1==e?a+("hour"===t?"An ":"A ")+t:a+(e+" ")+t+"s")+" ago"}var r=Date.now()-t,o=Math.floor(r/31536e6),s=Math.floor(r/2592e6),i=Math.floor(r/6048e5),l=Math.floor(r/864e5),c=Math.floor(r/36e5),m=Math.floor(r/6e4),r=Math.floor(r/1e3);return 0<o?n(o,"year"):0<s?n(s,"month"):0<i?n(i,"week"):0<l?n(l,"day"):0<c?n(c,"hour"):0<m?n(m,"minute"):a?n(r,"second"):e("Just now")},humanizeDuration:function(e){var t=Math.round(e/1e3);return(e=Math.floor(t/60))+":"+((t-=60*e)<10?"0":"")+t},getContextualDate:function(t){var a=u.Squarespace.DateUtils.dateFormat,n=new Date,r=a(new Date(t)),n=a(n),o=Date.now(),s=this.getOptimizedTime(t);return o+6048e5<t?a(t,{format:"%b %e, %Y"}):o+864e5<t?a(t,{format:"%A"})+" "+s:n===r?e("Today ")+s:o<t?e("Tomorrow ")+s:Date.now()-t<864e5?e("Yesterday ")+s:Date.now()-t<6048e5?a(t,{format:"%A"})+" "+s:Date.now()-t<31536e6?a(t,{format:"%b %e"}):a(t,{format:"%b %e, %Y"})},getOptimizedTime:function(e){var t=u.Squarespace.DateUtils.dateFormat;return"00"===t(e,{format:"%M"})?t(e,{format:"%l%P"}):t(e,{format:"%l:%M%P"})},dateFormat:function(t,a){if((a=a||{}).format=a.format||"%B %e, %Y",t)if(u.Lang.isDate(t)||!u.Lang.isNumber(t)&&!u.Lang.isString(t)){if(isNaN(t.getTime()))return e("Invalid Date")}else t=new Date(t);else t=new Date;if(!u.Lang.isValue(u.Object.getValue(Static,["SQUARESPACE_CONTEXT","tzData"])))return u.DataType.Date.format(t,a);var n=c(t),r=new Date(t.getTime()),o=r.getTimezoneOffset()+n.utcOffset;return r.setMinutes(r.getMinutes()+o),u.Lang.isString(u.Object.getValue(a,["format"]))&&(n.abbreviation&&(a.format=a.format.replace(/%Z/g,n.abbreviation.replace("%s",""))),a.format=s.fixYUIFormatForMissingDate(t,a.format,n)),u.DataType.Date.format(r,a)},fixYUIFormatForMissingDate:function(e,t,a){var n=new Date(e);n.setMinutes(n.getMinutes()+(a.utcOffset+n.getTimezoneOffset()));var r=new Date(e.getTime()+6e4*a.utcOffset);if(n.getHours()==r.getUTCHours())return t;var o={e:function(){return r.getUTCDate()},l:function(){var e=r.getUTCHours()%12;return 0==e?12:e},k:function(){return r.getUTCHours()},H:function(){var e=o.k();return e<10?"0"+e:e},I:function(){var e=o.l();return e<10?"0"+e:e},p:function(){return r.getUTCHours()<12?"AM":"PM"},P:function(){return o.p().toLowerCase()},r:function(){return"%I:%M:%S %p"},T:function(){return"%H:%M:%S"},Z:function(){return a.abbreviation}};for(e=function(e){return e=e.substr(1,1),o[e].call(this).toString()};t.match(/%[elkHIpPrTZ]/);)t=t.replace(/%[elkHIpPrTZ]/g,e);return t},getTimeOffsetToWebsiteTimezone:u.cached(function(e){if(u.Lang.isDate(e))e=e.getTime();else if(!u.Lang.isNumber(e))throw Error("Invalid argument");var t=-new Date(e).getTimezoneOffset();return c(e).utcOffset-t}),createWebsiteDate:function(){var e=new Date(Date.UTC.apply(this,arguments)),t=(t=c(e.getTime())).standardUTCOffset,t=(t=c(e.getTime()-6e4*t)).utcOffset;return e.setMinutes(e.getMinutes()-t),e},shiftForWebsiteTimezoneDisplay:function(e){if(!u.Lang.isValue(e))return null;if(!u.Lang.isValue(u.Object.getValue(Static,["SQUARESPACE_CONTEXT","tzData"])))return new Date(e);e=new Date(e);var t=u.Squarespace.DateUtils.getTimeOffsetToWebsiteTimezone(e);return e.setMinutes(e.getMinutes()+t),e},calculateFullDayOffset:function(e,t){if(!u.Lang.isValue(e)||!u.Lang.isValue(t))return null;function a(e){return(e=s.shiftForWebsiteTimezoneDisplay(e)).set({hour:0,minute:0,second:0,millisecond:0}),Math.floor(e.getTime()/864e5)}var n=a(e);return a(t)-n},getEnglishDateWithOrdinal:function(e){var t;if(10<(e=(e=this.shiftForWebsiteTimezoneDisplay(e)).getDate())&&e<20)return e+"th";switch(e%10){case 1:t="st";break;case 2:t="nd";break;case 3:t="rd";break;default:t="th"}return e+t},calculateDateDiff:function(e,t){if(t<e)return this.calculateDateDiff(t,e);var a=t.getFullYear()-e.getFullYear();t.getMonth()<e.getMonth()&&a--;var n=(t.getMonth()-e.getMonth()+12)%12,r=t.getDate()<e.getDate()?(n--,new Date(e.getYear(),e.getMonth()+1,0).getDate()-e.getDate()+t.getDate()):t.getDate()-e.getDate(),o=Math.floor(r/7);return{year:a,month:n,week:o,day:r-7*o}}}},"1.0",{requires:["intl","lang/datatype-date-format_en","squarespace-beforeunload"]}),YUI.add("squarespace-json-template",function(I){function k(e){return e.replace(/([\{\}\(\)\[\]\|\^\$\-\+\?])/g,"\\$1")}function i(e,t,a){for(var n=0;n<e.length;n++){var r=e[n];"string"==typeof r?a(r):(0,r[0])(r[1],t,a)}}function _(e,t,a){o=t.get(e.name);for(var n=0;n<e.formatters.length;n++)var r=e.formatters[n],o=(0,r[0])(o,t,r[1]);a(o)}function T(e,t,a){var n=t.PushSection(e.section_name),r=n?!0:!1;n&&0===n.length&&(r=!1),r?(i(e.Statements(),t,a),t.Pop()):(t.Pop(),i(e.Statements("or"),t,a))}function C(e,t,a){for(var n=t.get("@"),r=0;r<e.clauses.length;r++){var o=e.clauses[r],s=o[1];if((0,o[0][0])(n,t,o[0][1])){i(s,t,a);break}}}function D(e,t,a){if((n=t.PushSection(e.section_name))&&0<n.length){var n=n.length-1,r=e.Statements();e=e.Statements("alternate");for(var o=0;void 0!==t.next();o++)i(r,t,a),o!=n&&i(e,t,a)}else i(e.Statements("or"),t,a);t.Pop()}function n(e,a){function t(e){if(e.startsWith(x)){var n=a.partials[e.substr(x.length)];if(n)return[function(e,t,a){return I.JSONTemplate.evaluateJsonTemplate(n,e)},null];throw{name:"BadPartialInclude",message:e.substr(x)+" is not a valid partial. Remember, loops are not supported (a partial include cannot be included inside itself)."}}var t=r.lookup(e);if(!t[0])throw{name:"BadFormatter",message:e+" is not a valid formatter"};return t}function n(e){var t=o.lookup(e);if(!t[0])throw{name:"BadPredicate",message:e+" is not a valid predicate"};return t}var r=new A([M(I.JSONTemplate.DEFAULT_FORMATTERS),z(I.JSONTemplate.DEFAULT_PREFIX_FORMATTERS)]),o=A([M(I.JSONTemplate.DEFAULT_PREDICATES),z(I.JSONTemplate.DEFAULT_PARAMETRIC_PREDICATES)]),s=a.format_char||"|";if(":"!=s&&"|"!=s)throw{name:"ConfigurationError",message:"Only format characters : and | are accepted"};if(1==(f=(g=a.meta||"{}").length)%2)throw{name:"ConfigurationError",message:g+" has an odd number of metacharacters"};for(var i,l,c,m,u,d,p=g.substring(0,f/2),g=g.substring(f/2,f),f=(void 0===(d=q[(m=p)+(u=g)])&&(d="("+k(m)+"\\S.*?"+k(u)+"\n?)",d=RegExp(d,"g")),d),h=L({}),y=[h],b=p.length,w=0;null!==(i=f.exec(e));)if(l=i[0],i.index>w&&(w=e.slice(w,i.index),h.Append(w)),w=f.lastIndex,i=!1,"\n"==l.slice(-1)&&(l=l.slice(null,-1),i=!0),"#"!=(l=l.slice(b,-b)).charAt(0)){if("."==l.charAt(0)){if(void 0!==(v={"meta-left":p,"meta-right":g,space:" ",tab:"",newline:"\n"}[l=l.substring(1,l.length)])){h.Append(v);continue}if(v=l.match(U)){l=v[3],l=v[1]?(i=D,function(e){var t=L(e);return t.AlternatesWith=function(){t.current_clause=[],t.statements.alternate=t.current_clause},t}({section_name:l})):(i=T,L({section_name:l})),h.Append([i,l]),y.push(l),h=l;continue}if(v=l.match(O)){i=(c=v[1])?n(c):null,h.NewOrClause(i);continue}var v=!1,S=l.match(E);if(S){if(v=!0,-1==(c=S[1]).indexOf("?")){i=[function(o){return function(e,t){var a,n,r;if(-1!==o.indexOf(" || ")){for(a=o.split("||"),r=0;r<a.length;r++)if(n=a[r].trim(),t.get(n))return!0;return!1}if(-1===o.indexOf(" && "))return t.get(o);for(a=o.split(" && "),r=0;r<a.length;r++)if(n=a[r].trim(),!t.get(n))return!1;return!0}}(c),null],(l=F()).NewOrClause(i),h.Append([C,l]),y.push(l),h=l;continue}}else"?"!=l.charAt(l.length-1)&&"?"!=l.split(" ")[0].charAt(l.split(" ")[0].length-1)||(c=l,v=!0);if(v){i=c?n(c):null,(l=F()).NewOrClause(i),h.Append([C,l]),y.push(l),h=l;continue}if("alternates with"==l){h.AlternatesWith();continue}if("end"==l){if(y.pop(),!(0<y.length))throw{name:"TemplateSyntaxError",message:"Got too many {end} statements"};h=y[y.length-1];continue}}if(1==(S=l.split(s)).length)v=[t("str")];else{for(v=[],l=1;l<S.length;l++)v.push(t(S[l]));l=S[0]}h.Append([_,{name:l,formatters:v}]),i&&h.Append("\n")}if(h.Append(e.slice(w)),1!==y.length)throw{name:"TemplateSyntaxError",message:"Got too few {end} statements."};return h}I.namespace("JSONTemplate");var x="apply ",q={},e={"has-multiple?":function(e){return 1<e.length},"main-image?":function(e){return!!e.mainImageId||!!e.systemDataId},"video?":function(e){return 8==e.recordType||"video"===e.recordTypeLabel},"child-images?":function(e){return!!(e.items&&0<e.items.length&&((e=e.items[0]).mainImageId||e.systemDataId))},"location?":function(e){return e.location&&e.location.mapLat&&e.location.mapLng},"excerpt?":function(e){return!T(e.excerpt&&(e.excerpt.html||e.excerpt)||"")},"collection?":function(e){return e.collection},"collection-page?":function(e){return e.collection&&10===e.collection.type},"passthrough?":function(e){return e.passthrough&&e.sourceUrl&&""!==e.sourceUrl},"event?":function(e){return 12==e.recordType},"external-link?":function(e){return!!e.externalLink},"folder?":function(e){return e.collection&&e.collection.folder},"index?":function(e){return 1===Y.Object.getValue(e,["collection","folder","folderBehavior"])},"variation?":function(e){return 4===Y.Object.getValue(e,["collection","folder","folderBehavior"])},"singular?":function(e){return 1===e},"plural?":function(e){return 1!==e},"serviceNameEmail?":function(e,t){return"email"===e.serviceName},"has-variants?":function(e){return Y.Squarespace.Commerce.hasVariants(e)},"varied-prices?":function(e){return Y.Squarespace.Commerce.variedPrices(e)},"on-sale?":function(e){return Y.Squarespace.Commerce.onSale(e)},"sold-out?":function(e){return Y.Squarespace.Commerce.soldOut(e)}},t={html:d,htmltag:p,htmlattr:p,str:function(t){if(null==t)return"";try{return t.toString()}catch(e){return"[JSONT: Can't format variable as string (typeof: "+typeof t+").]"}},raw:function(e){return e},capitalize:function(e){return e.toUpperCase()},safe:function(e){return e?e.replace(/<.*?>/g,""):""},json:function(e){return Y.JSON.stringify(e).replace(/<\/script>/g,'</scr"+"ipt>')},smartypants:function(e){return(e=(e=(e=(e=e.replace(/(^|[-\u2014\s(\["])'/g,"$1â€˜")).replace(/'/g,"â€™")).replace(/(^|[-\u2014/\[(\u2018\s])"/g,"$1â€œ")).replace(/"/g,"â€")).replace(/--/g,"â€”")},slugify:function(e){return e?e.replace(/[^\-a-zA-Z0-9\s]+/gi,"").replace(/\s/g,"-").toLowerCase():""},"url-encode":function(e){return encodeURIComponent(e)},count:function(e){var t=e.length;if(null==t&&"object"==typeof e)for(M in t=0,e)Object.prototype.hasOwnProperty.call(e,M)&&t++;return t||0},"image-meta":function(e){if(e){var t,a="0.5,0.5";return e.mediaFocalPoint&&(a=e.mediaFocalPoint.x+","+e.mediaFocalPoint.y),e.title&&0<e.title.length&&(t=e.title),!t&&e.body&&0<e.body.length&&(t=e.body.replace(/<(?:.|\n)*?>/gm,"")),!t&&e.filename&&0<e.filename.length&&(t=e.filename),t=t&&p(t),'data-image="'+e.assetUrl+'" data-src="'+e.assetUrl+'" data-image-dimensions="'+(e.originalSize||"")+'" data-image-focal-point="'+a+'" alt="'+t+'" '}},round:function(e,t,a){return Math.round(parseFloat(e))},"product-status":function(e){return Y.Squarespace.Commerce.soldOut(e)?'<div class="product-mark sold-out">sold out</div>':Y.Squarespace.Commerce.onSale(e)?'<div class="product-mark sale">sale</div>':void 0},"money-string":function(e){return Y.Squarespace.Commerce.moneyString(e)},"product-price":function(e){return'<div class="product-price">'+Y.Squarespace.Commerce.priceString(e)+"</div>"},"from-price":function(e){return Y.Squarespace.Commerce.fromPrice(e)},"normal-price":function(e){return Y.Squarespace.Commerce.normalPrice(e)},"sale-price":function(e){return Y.Squarespace.Commerce.salePrice(e)},"variant-descriptor":function(e){return Y.Squarespace.Commerce.variantFormat(e)},"color-weight":function(e){return e&&0<e.length&&e.length<=7?(e=e.replace("#",""),8388607.5<parseInt(e,16)?"light":"dark"):""},"summary-form-field":function(e){return Y.Squarespace.Commerce.summaryFormFieldString(e)},pluralize:function(e,t){var a,n;switch(t.length){case 0:a="",n="s";break;case 1:a="",n=t[0];break;case 2:a=t[0],n=t[1];break;default:throw Error("pluralize got too many args")}return 1===e?a:n}},a=I.Squarespace.TEMPLATE_PREFIX_FORMATTERS||[];I.JSONTemplate.DEFAULT_FORMATTERS=I.Squarespace.TEMPLATE_FORMATTERS||t,I.JSONTemplate.DEFAULT_PREFIX_FORMATTERS=[].concat(a,[{name:"pluralize",func:function(e,t,a){switch(a.length){case 0:t="",a="s";break;case 1:t="",a=a[0];break;case 2:t=a[0],a=a[1];break;default:throw{name:"EvaluationError",message:"pluralize got too many args"}}return 1==e?t:a}},{name:"encode-space",func:function(e,t,a){return e.replace(/\s/g,"&nbsp;")}},{name:"truncate",func:function(e,t,a){return t=a[0]||100,a=a[1]||"...",e&&e.length>t&&(e=(e=e.substring(0,t)).replace(/\w+$/,""),e+=a),e}},{name:"date",func:function(e,t,a){var n,r=0,r=new Date(e).getTimezoneOffset();if(!I.Lang.isNumber(e))return"Invalid date.";if("undefined"!=typeof TimezoneJS){try{n=new TimezoneJS.Date(e,t.get("website.timeZone"))}catch(e){return"Invalid Timezone"}r=(isNaN(n.getTimezoneOffset())?0:n.getTimezoneOffset())-r}else r=(t=-parseInt(Static.SQUARESPACE_CONTEXT.website.timeZoneOffset,10)/6e4)-(n=(new Date).getTimezoneOffset());return e=new Date(e-6e4*r),a=a.join(" "),I.DataType.Date.format(e,{format:a})}},{name:"image",func:function(e,t,a){var n;return e.mediaFocalPoint&&(n=e.mediaFocalPoint.x+","+e.mediaFocalPoint.y),'<img class="'+(a[0]?a[0]:"thumb-image")+'" '+(e.title?'alt="'+p(e.title)+'" ':"")+' data-image="'+e.assetUrl+'" data-image-dimensions="'+e.originalSize+'" data-image-focal-point="'+n+'"/>'}},{name:"video",func:function(e,t,a){var n=e.oembed||e.structuredContent&&e.structuredContent.oembed||{},r=e.assetUrl,o=e.mediaFocalPoint,s=!1,i=!1,l=e.colorData;if(a)for(var c=0;c<a.length;c++){var m=a[c];"load-false"===m?s=!0:"color-data"===m&&(i=!0)}var u,d='<div class="sqs-video-wrapper" '+(s?'data-load="false" ':"")+'data-html="'+p(n.html)+'" data-provider-name="'+n.providerName+'">';return e.overlay&&(u='<div class="sqs-video-overlay',e.mainImageId||e.systemDataId?(u+='" style="opacity: 0;">',u+='<img data-load="false" data-image="'+r+'" data-src="'+r+'" data-image-dimensions="'+(e.originalSize||"")+'" data-image-focal-point="'+(o?o.x+","+o.y:"0.5,0.5")+'" ',i&&l&&(u+='data-color-topleft="#'+l.topLeftAverage+'" data-color-topright="#'+l.topRightAverage+'" data-color-bottomleft="#'+l.bottomLeftAverage+'" data-color-bottomright="#'+l.bottomRightAverage+'" data-color-center="#'+l.centerAverage+'" '),u+="/>"):u+=' no-thumb" style="opacity: 0;">',u+='<div class="sqs-video-opaque"> </div><div class="sqs-video-icon"></div>',d+=u+="</div>"),d+"</div>"}},{name:"timesince",func:function(e,t,a){return I.Lang.isNumber(e)?(a.join(" "),'<span class="timesince" data-date="'+e+'">'+I.Squarespace.DateUtils.humanizeDate(e)+"</span>"):"Invalid date."}},{name:"resizedHeightForWidth",func:function(e,t,a){return 2!=(t=e.split("x")).length?"Invalid source parameter.  Pass in 'originalSize'.":(e=parseInt(t[0],10),t=parseInt(t[1],10),a=parseInt(a[0],10)/e,parseInt(t*a,10))}},{name:"resizedWidthForHeight",func:function(e,t,a){return 2!=(t=e.split("x")).length?"Invalid source parameter.  Pass in 'originalSize'.":(e=parseInt(t[0],10),t=parseInt(t[1],10),a=parseInt(a[0],10)/t,parseInt(e*a,10))}},{name:"squarespaceThumbnailForWidth",func:function(e,t,a){return Y.Squarespace.Rendering.getSquarespaceSizeForWidth(parseInt(a[0],10))}},{name:"squarespaceThumbnailForHeight",func:function(e,t,a){return 2!=(t=e.split("x")).length?"Invalid source parameter.  Pass in 'originalSize'.":(e=parseInt(t[0],10),t=parseInt(t[1],10),a=parseInt(a[0],10)/t,a=parseInt(e*a,10),Y.Squarespace.Rendering.getSquarespaceSizeForWidth(a))}},{name:"cycle",func:function(e,t,a){return a[(e-1)%a.length]}}]);function z(r){return{lookup:function(e){for(var t=0;t<r.length;t++){var a=r[t].name,n=r[t].func;if(e.slice(0,a.length)==a)return[n,e=""===(t=e.charAt(a.length))?[]:e.split(t).slice(1)]}return[null,null]}}}function A(n){return{lookup:function(e){for(var t=0;t<n.length;t++){var a=n[t].lookup(e);if(a[0])return a}return[null,null]}}}function r(e){var t={current_clause:[],Append:function(e){t.current_clause.push(e)},AlternatesWith:function(){throw{name:"TemplateSyntaxError",message:"{.alternates with} can only appear with in {.repeated section ...}"}},NewOrClause:function(e){throw{name:"NotImplemented"}}};return t}function L(e){var t=r();return t.statements={default:t.current_clause},t.section_name=e.section_name,t.Statements=function(e){return t.statements[e||"default"]||[]},t.NewOrClause=function(e){if(e)throw{name:"TemplateSyntaxError",message:"{.or} clause only takes a predicate inside predicate blocks"};t.current_clause=[],t.statements.or=t.current_clause},t}function F(e){var t=r();return t.clauses=[],t.NewOrClause=function(e){e=e||[function(e){return!0},null],t.current_clause=[],t.clauses.push([e,t.current_clause])},t}var M=function(t){return{lookup:function(e){return[t[e]||null,null]}}},U=/(repeated)?\s*(section)\s+(\S+)?/,O=/^or(?:[\s\-]+(.+))?/,E=/^if(?:[\s\-]+(.+))?/;I.JSONTemplate.Template=function(){this.initialize.apply(this,arguments)},I.JSONTemplate.Template.prototype={initialize:function(e,t,a){e=this.removeMultilineComments(e),this._options=t||{},this._program=n(e,this._options)},removeMultilineComments:function(e){for(var t,a=e.search("{##");0<=a;)t=e.substr(a),a=(e=e.substr(0,a)+t.substr(t.search("##}")+3)).search("{##");return e},render:function(e,t){var a,n,r,o=(a=e,n=this._options.undefined_str,r=[{context:a,index:-1}],{PushSection:function(e){return null==e?null:(e="@"==e?r[r.length-1].context:r[r.length-1].context[e]||null,r.push({context:e,index:-1}),e)},Pop:function(){r.pop()},next:function(){var e=r[r.length-1];-1==e.index&&(e={context:null,index:0},r.push(e));var t=r[r.length-2].context;if(e.index!=t.length)return e.context=t[e.index++],!0;r.pop()},_Undefined:function(e){return void 0===n?null:n},_LookUpStack:function(e){for(var t=r.length-1;;){var a=r[t];if("@index"==e){if(-1!=a.index)return a.index}else if("object"==typeof(a=a.context)&&void 0!==(a=a[e]))return a;if(--t<=-1)return this._Undefined(e)}},get:function(e){if("@"==e)return r[r.length-1].context;var t=e.split("."),a=this._LookUpStack(t[0]);if(1<t.length)for(var n=1;n<t.length;n++){if(null===a)return"";if(void 0===(a=a[t[n]]))return this._Undefined(t[n])}return a}});i(this._program.Statements(),o,t)},expand:function(e){var t=[];return this.render(e,function(e){t.push(e)}),t.join("")}},I.JSONTemplate.DEFAULT_PREDICATES=I.Squarespace.TEMPLATE_PREDICATES||e,I.JSONTemplate.DEFAULT_PARAMETRIC_PREDICATES=I.Squarespace.TEMPLATE_PARAMETRIC_PREDICATES||[],I.JSONTemplate.evaluateJsonTemplate=function(e,t,a){return"string"!=typeof e?"JSON Template Error: Processing failed because no input was provided. (type: "+typeof e+", template: "+JSON.stringify(e)+", dictionary: "+JSON.stringify(t)+", partials: "+JSON.stringify(a)+")":new I.JSONTemplate.Template(e,{partials:a}).expand(t)}},"1.0",{requires:"json squarespace-common squarespace-date-utils squarespace-escaping-utils squarespace-commerce-utils squarespace-util".split(" ")}),Y.use(["squarespace-json-template","datatype-date-format"],function(){w=new Y.JSONTemplate.Template('<time class="summary-metadata-item summary-metadata-item--date" datetime="{formatShortDate}">{formatDate}</time>{.if startDate}<time class="summary-metadata-item summary-metadata-item--event-time"><span class="event-time-12hr">{formatTime12}</span> <span class="event-time-24hr">{formatTime24}</span></time>{.end}{.if categories}<span class="summary-metadata-item summary-metadata-item--cats">{.repeated section categories}<a href="{collectionUrl}/?category={@|url-encode}">{@}</a>{.alternates with}, {.end}</span>{.end}{.if tags}<span class="summary-metadata-item summary-metadata-item--tags">{.repeated section tags}<a href="{collectionUrl}/?tag={@|url-encode}">{@}</a>{.alternates with}, {.end}</span>{.end}{.if author.id}<span class="summary-metadata-item summary-metadata-item--author"><a href="{collectionUrl}/?author={author.id}#show-archive">{author.displayName}</a> </span>{.end}{.if mapUrl}<span class="summary-metadata-item summary-metadata-item--location"><a href="{mapUrl}" target="_blank">{addressText}</a></span>{.end}{.if commentState}<span class="summary-metadata-item summary-metadata-item--comments comments-count-{commentCount}"><a href="{fullUrl}#comments-{id}">{.if commentCount}{commentCount}{.end}</a></span>{.end}{summaryShareButtons}'),m=new Y.JSONTemplate.Template('<div data-like-count="{likeCount}" class="summary-item sqs-gallery-design-{summ_config.design}-slide lazy-loaded-item{.if starred} item-featured{.end} summary-item-record-type-{recordTypeLabel}{.if contentType} summary-item-has-thumbnail{.end}{.if excerpt} summary-item-has-excerpt{.end}{.if categories && categories.0} summary-item-has-cats{.end}{.if tags && tags.0} summary-item-has-tags{.end}{.if author.id} summary-item-has-author{.end}{.if mapUrl} summary-item-has-location{.end}{.if commentState} summary-item-has-comments-enabled{.end}{.if quickProduct} sqs-product-quick-view-button-hover-area{.end}{sold}{sale}"{.if clickthroughUrl} data-click-through-url="{clickthroughUrl}"{.end} data-id="{id}"{.video?} data-type="video"{.or} data-type="image"{.end}>{.if summ_config.showThumbnail}{.video?}<div class="summary-thumbnail-container sqs-gallery-image-container">{@|video}</div>{.or}<div class="summary-thumbnail-outer-container"><a class="summary-thumbnail-container sqs-gallery-image-container" {.if title}data-title="{title|htmlattr}"{.end} {.if excerpt}data-description="{excerpt|htmlattr}"{.end} href="{.if itemUrl}{itemUrl}{.end}"{.if followSourceUrl}target="_blank"{.end}>{.main-image?}<div class="summary-thumbnail img-wrapper"><img class="summary-thumbnail-image"{@|image-meta}/>{.if productMark}{productMark}{.end}{.if alternateImage}{alternateImage}{.end}{.if startDate}<div class="summary-thumbnail-event-date"> <div class="summary-thumbnail-event-date-inner"> <span class="summary-thumbnail-event-date-month">{formatMonth}</span> <span class="summary-thumbnail-event-date-day">{formatDay}</span> </div></div>{.end}</div>{.end}</a>{.if quickProduct}{quickProduct}{.end}</div>{.end}{.end}<div class="summary-content sqs-gallery-meta-container"> <div class="summary-metadata-container summary-metadata-container--above-title"> <div class="summary-metadata summary-metadata--primary">{metaContent}</div><div class="summary-metadata summary-metadata--secondary">{metaContent}</div></div>{.if summ_config.showTitle}<div class="summary-title"><a class="summary-title-link" href="{.if itemUrl}{itemUrl}{.end}"{.if followSourceUrl} target="_blank"{.end}>{title}</a> </div>{.end}<div class="summary-metadata-container summary-metadata-container--below-title"> <div class="summary-metadata summary-metadata--primary">{metaContent}</div><div class="summary-metadata summary-metadata--secondary">{metaContent}</div></div>{.if price}{.if summ_config.showPrice}<div class="summary-price">{price}</div>{.end}{.end}{.if summ_config.showExcerpt}{.if bodyExcerpt}<div class="summary-excerpt">{body}</div>{.or}<div class="summary-excerpt">{excerpt}</div>{.end}{.end}{.if summ_config.showReadMoreLink}<a class="summary-read-more-link" href="{.if itemUrl}{itemUrl}{.end}">{readMoreText}</a>{.end}<div class="summary-metadata-container summary-metadata-container--below-content"> <div class="summary-metadata summary-metadata--primary">{metaContent}</div><div class="summary-metadata summary-metadata--secondary">{metaContent}</div></div></div></div>')}))}function Z(e){e.forEach(function(i){var e,t,l,c,m,n,r;i.container&&i.container.toLowerCase?(e=Y.one(i.container))?e.hasClass("view-item")?(t=e.one(".hentry[data-item-id]"),l=i.placeTo&&i.placeTo.length&&e.one(i.placeTo.split("|")[0])||t,c=i.placeTo&&i.placeTo.length&&-1<i.placeTo.indexOf("|")&&i.placeTo.split("|")[1]||null,m=i.summarySettings||{},l&&(window.location.pathname,n=window.location.pathname+"?format=json",r="json",new Y.Promise(function(a,t){var e=r&&"json"==r?"application/json;charset=UTF-8":"text/plain;charset=UTF-8";Y.io(n,{headers:{"Content-Type":e},on:{success:function(e,t){t&&t.responseText&&a(r&&"json"==r?JSON.parse(t.responseText):t.responseText)},failure:function(e){t(e)}}})}).then(function(e){var t,a,n,r=null;if(e.item){var o=R({filter:{},collectionType:e.collection.typeName,collectionUrl:e.collection.fullUrl,collectionId:e.collection.id,relatedIdToDelete:e.item.id,currentItem:{id:e.item.id,categories:e.item.categories,tags:e.item.tags,featured:e.item.starred,fullUrl:e.item.fullUrl}},m);if(i.filter&&(i.filter.customLogic&&"function"==typeof i.filter.customLogic||(i.filter.tag&&e.item.tags&&(o.filter.tag=e.item.tags+""),i.filter.category&&e.item.categories&&(o.filter.category=e.item.categories+""),i.filter.featured&&(o.filter.featured=!0))),!i.remoteSummary){var s=R({},u),o=R(s,o);if(t=o,(n=document.createElement("div")).className="sqs-block summary-v2-block sqs-block-summary-v2 related-summary-block",n.setAttribute("data-block-json",JSON.stringify(t)),n.innerHTML='<div class="sqs-block-content"><div class="summary-block-wrapper summary-block-collection-type-'+(a=t).collectionType+" summary-block-setting-text-size-"+a.textSize+" summary-block-setting-text-align-"+a.textAlignment+" summary-block-setting-design-"+a.design+" summary-block-setting-design-list-thumbnail-"+a.listImageAlignment+" summary-block-setting-metadata-position-"+a.metadataPosition+" summary-block-setting-primary-metadata-"+a.primaryMetadata+" summary-block-setting-secondary-metadata-"+a.secondaryMetadata+(a.showThumbnail?" summary-block-setting-show-thumbnail":"")+(a.showTitle?" summary-block-setting-show-title":"")+(a.showPrice?" summary-block-setting-show-price":"")+(a.showExcerpt?" summary-block-setting-show-excerpt":"")+(a.showReadMoreLink?" summary-block-setting-show-read-more-link":"")+" sqs-gallery-design-"+a.design+'"><div class="summary-item-list-container sqs-gallery-container"><header class="summary-block-header"><div class="summary-heading"><span class="summary-header-text">'+t.headerText+'</span></div><div class="summary-carousel-pager sqs-gallery-controls"><span class="summary-carousel-pager-next next"></span><span class="summary-carousel-pager-prev previous"></span></div></header><div class="summary-item-list sqs-gallery sqs-gallery-design-'+t.design+'"></div></div></div></div>',r=Y.one(n))try{l.insert(r,c),G(),B(),j(),window.Y.Squarespace.GalleryManager.initializeBlock(r),o.lazyFilter||(o.lazyFilter={}),o.lazyFilter.customLogic=i.filter.customLogic,I(r,o)}catch(e){console.log(e)}}}else console.log("Seems no item in JSON response, no data to build Related Summary")}))):console.log("Container should have a view-item classname"):console.log("Container not found on current page"):console.log("Related container should be CSS selector string")})}window.lazy_summaries_script_loaded||(window.lazy_summaries_script_loaded=!0,window.Static.SQUARESPACE_CONTEXT.templateVersion&&(t=window.Static.SQUARESPACE_CONTEXT.templateVersion),k=!1,_=function(){var r;window.Squarespace&&window.Squarespace.initializeSummaryV2Block&&!k&&(r=window.Y,window.Squarespace.initializeSummaryV2Block=function(n){r=window.Y,n.all(".summary-v2-block").each(function(e){try{e.hasClass("sqs-block-summary-v2")||e.addClass("sqs-block-summary-v2");var t,a=e.getAttribute("data-block-json")?JSON.parse(e.getAttribute("data-block-json")):{ignoreInit:!1};window.customLazySummaries&&window.customLazySummaries["*"]&&window.customLazySummaries["*"].hooks&&((t=window.customLazySummaries["*"].hooks.beforeCreate)&&"function"==typeof t&&t(e,a)),G(),B(),j(),a.ignoreInit||n.Squarespace.GalleryManager.initializeBlock(e),r||(J(),I(e))}catch(e){console.log(e)}})},k=!0)},T=function(){var e,t,a;document.getElementById("lazySummariesStyles")||(e='body{overflow-anchor: none}.sqs-block-summary-v2 [class*="comments-count-"] a:after{content: "Comments";padding-left:.5ch} .sqs-block-summary-v2 .comments-count-0 a:after,.sqs-block-summary-v2 .comments-count-1 a:after {content: "Comment"} .summary-hideLoadMore .loadMoreButtonWrapper{position:absolute;padding:0!important;margin:0!important;height:1px!important;pointer-events:none!important;opacity:0!important;visibility:hidden!important;}.sqs-gallery-design-autocolumns .summary-item img:not([src]){max-width:280px}.sqs-block-summary-v2 .grid-items-in-row-used{font-size:0;letter-spacing:0}.sqs-block-summary-v2 .grid-items-in-row-used .summary-item{display:inline-block;vertical-align:top;float: none;clear: none}.sqs-block-summary-v2 .summary-share-buttons{display:none;padding:10px 0}.sqs-block-summary-v2 .summary-block-wrapper.summary-block-setting-secondary-metadata-share-buttons .summary-metadata--secondary .summary-share-buttons{display:block}.sqs-block-summary-v2 .summary-block-wrapper.summary-block-setting-primary-metadata-share-buttons .summary-metadata--primary .summary-share-buttons{display:block}.sqs-block-summary-v2 .summary-block-wrapper.summary-block-setting-secondary-metadata-share-buttons .summary-metadata--secondary{display:block}.sqs-block-summary-v2 .summary-block-wrapper.summary-block-setting-primary-metadata-share-buttons .summary-metadata--primary{display:block}.sqs-block-summary-v2 .loadMoreButton:after{margin-left:5px;content:"("attr(data-items-left)")";display:inline-block}.summary-thumbnail-image-alternate{background-color: #fff;position: absolute !important;z-index: 2;opacity:0!important;transition: .3s opacity!important;}.summary-thumbnail-outer-container:hover .summary-thumbnail-image-alternate{opacity:1!important}.lazy-loading-status{bottom:0;width:32px;height:32px;border:2px solid rgba(0,0,0,.7);border-top-color:rgba(0,0,0,.08);border-left-color:rgba(0,0,0,.08);display:block;margin:3% 0 0 0;position:absolute;left:48.5%;left:calc(50% - 16px);display:none!important;}.lazy-summary-loading .lazy-loading-status{display:block!important}',t=document.querySelectorAll("head")[0],(a=document.createElement("style")).id="lazySummariesStyles",a.type="text/css",a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e)),t.appendChild(a)),_(),window.Y?(J(),window.Squarespace.onInitialize(window.Y,function(){var n,r,o,s;Y.all(".summary-v2-block").each(function(e){I(e)}),i=Y.Global.after("init-lazy-summary",function(e){e&&e.block&&I(e.block,e.json)}),l=Y.one(window).on("resize",(n=function(){Y.fire("summary-sync")},o=!(r=200),function(){var e=this,t=arguments,a=o&&!s;clearTimeout(s),s=setTimeout(function(){s=null,o||n.apply(e,t)},r),a&&n.apply(e,t)})),window.customLazySummaries&&window.customLazySummaries.related&&window.customLazySummaries.related.length&&(console.log("Work with Related"),Z(window.customLazySummaries.related))}),window.Squarespace.onDestroy(window.Y,function(){i&&i.detach(),l&&l.detach()}),Y.on("template:dynamicPageReady",function(){window.__initializeLazySummaries()}),Y.on("domready",function(){Y.one(".c-tabs__tabpanel .sqs-block-summary-v2")&&window.__initializeLazySummaries()})):console.log("No YUI on page")},window.Y?T():document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e,!1),_(),setTimeout(function(){T()},16)},!1),_(),window.__initializeLazySummaries=function(){J(),window.Y.all(".summary-v2-block").each(function(e){I(e)})}),window.self!==window.top&&window.top.document.querySelector("html.squarespace-damask")&&(window.top.Y||window.top.Y.Get)&&(window.top.Y.Get={js:function(e,t){var a,n,r,o,s;a=e,n=window.top.document.getElementsByTagName("head")[0],r=t,(s=document.createElement("script")).src=a+"?cache="+((new Date).getTime()+"").substr(0,7),s.onload=function(){o&&this.remove(),r&&r(null,{nodes:[this]})},n.appendChild(s)}})}();
